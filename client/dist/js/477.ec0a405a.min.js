"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([[477],{36509:(e,t,r)=>{r.d(t,{E:()=>c});var s=r(34629),i=r(63696);const a={circle:"pf-m-circle",square:"pf-m-square",widthSm:"pf-m-width-sm",widthMd:"pf-m-width-md",widthLg:"pf-m-width-lg",width_25:"pf-m-width-25",width_33:"pf-m-width-33",width_50:"pf-m-width-50",width_66:"pf-m-width-66",width_75:"pf-m-width-75",heightSm:"pf-m-height-sm",heightMd:"pf-m-height-md",heightLg:"pf-m-height-lg",height_25:"pf-m-height-25",height_33:"pf-m-height-33",height_50:"pf-m-height-50",height_66:"pf-m-height-66",height_75:"pf-m-height-75",height_100:"pf-m-height-100",text_4xl:"pf-m-text-4xl",text_3xl:"pf-m-text-3xl",text_2xl:"pf-m-text-2xl",textXl:"pf-m-text-xl",textLg:"pf-m-text-lg",textMd:"pf-m-text-md",textSm:"pf-m-text-sm"};var n=r(62634);const l="--pf-v5-c-skeleton--Height",o="--pf-v5-c-skeleton--Width",c=e=>{var{className:t,width:r,height:c,fontSize:u,shape:h,screenreaderText:d}=e,m=(0,s.__rest)(e,["className","width","height","fontSize","shape","screenreaderText"]);const p=u?Object.values(a).find((e=>e===`pf-m-text-${u}`)):void 0;return i.createElement("div",Object.assign({},m,{className:(0,n.A)("pf-v5-c-skeleton",u&&p,"circle"===h&&a.circle,"square"===h&&a.square,t)},(r||c)&&{style:Object.assign({[o]:r||void 0,[l]:c||void 0},m.style)}),i.createElement("span",{className:"pf-v5-screen-reader"},d))};c.displayName="Skeleton"},86361:(e,t,r)=>{r.d(t,{u:()=>s});const s={name:"--pf-v5-global--danger-color--100",value:"#c9190b",var:"var(--pf-v5-global--danger-color--100)"}},19174:(e,t,r)=>{r.d(t,{n:()=>s});const s={name:"--pf-v5-global--info-color--100",value:"#2b9af3",var:"var(--pf-v5-global--info-color--100)"}},44304:(e,t,r)=>{r.d(t,{p:()=>s});const s={name:"--pf-v5-global--palette--black-400",value:"#b8bbbe",var:"var(--pf-v5-global--palette--black-400)"}},53359:(e,t,r)=>{r.d(t,{c:()=>s});const s={name:"--pf-v5-global--palette--purple-400",value:"#8476d1",var:"var(--pf-v5-global--palette--purple-400)"}},53820:(e,t,r)=>{r.d(t,{H:()=>s});const s={name:"--pf-v5-global--warning-color--100",value:"#f0ab00",var:"var(--pf-v5-global--warning-color--100)"}},28644:(e,t,r)=>{r.d(t,{n:()=>u});var s=r(63696),i=r(28338),a=r(70045),n=r(13867),l=r(86099),o=r(55399),c=r(11848);const u=({severities:e})=>{const t=Object.values(e).reduce(((e,t)=>e+t),0);return s.createElement(i.s,{spaceItems:{default:"spaceItemsSm"},alignItems:{default:"alignItemsCenter"},flexWrap:{default:"nowrap"},style:{whiteSpace:"nowrap"}},s.createElement(a.Z,{style:{minWidth:15,textAlign:l.pG}},t),s.createElement(n.c,{orientation:{default:"vertical"}}),s.createElement(a.Z,null,s.createElement(i.s,null,Object.entries(e).filter((([e,t])=>t>0)).sort((0,o.Sx)((([e,t])=>e))).reverse().map((([e,t],r)=>s.createElement(a.Z,{key:r,spacer:{default:"spacerXs"}},s.createElement(i.s,{spaceItems:{default:"spaceItemsXs"},alignItems:{default:"alignItemsCenter"},flexWrap:{default:"nowrap"},style:{whiteSpace:"nowrap"}},s.createElement(a.Z,null,s.createElement(c.h,{value:e,hideLabel:!0})),s.createElement(a.Z,null,t))))))))}},89101:(e,t,r)=>{r.d(t,{U:()=>o,n:()=>c});var s=r(63696),i=r(91728);const a={total:0,severities:{none:0,low:0,medium:0,high:0,critical:0}},n={vulnerabilityStatus:{affected:{...a},fixed:{...a},not_affected:{...a},known_not_affected:{...a}}},l=e=>{const t=e.flatMap((e=>(e.status??[]).map((t=>({vulnerability:t,advisory:e,vulnerabilityStatus:t.status,packages:t.packages||[]}))))),r=t.reduce(((e,t)=>{const r=t.vulnerabilityStatus,s=t.vulnerability.average_severity,i=e.vulnerabilityStatus[r];return{...e,vulnerabilityStatus:{...e.vulnerabilityStatus,[r]:{total:i.total+1,severities:{...i.severities,[s]:i.severities[s]+1}}}}}),n);return{vulnerabilities:t,summary:r}},o=e=>{const{advisories:t,isFetching:r,fetchError:a}=(0,i.DH)(e);return{data:s.useMemo((()=>l(t||[])),[t]),isFetching:r,fetchError:a}},c=e=>{const{advisories:t,isFetching:r,fetchError:a}=(0,i.zY)(e);return{data:s.useMemo((()=>(t??[]).map((e=>l(e||[])))),[t]),isFetching:r,fetchError:a}}},36390:(e,t,r)=>{r.d(t,{L:()=>c,c:()=>u});var s=r(63696),i=r(87043),a=r(86820),n=r(70611),l=r(5098),o=r(91728);const c=s.createContext({}),u=({children:e})=>{const t=(0,n.MM)({tableName:"sbom",persistenceKeyPrefix:a.rt.sboms,persistTo:"urlParams",columnNames:{name:"Name",version:"Version",supplier:"Supplier",published:"Created on",packages:"Dependencies",vulnerabilities:"Vulnerabilities"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["name","published"],isFilterEnabled:!0,filterCategories:[{categoryKey:a._G,title:"Filter text",placeholderText:"Search",type:i.RJ.search},{categoryKey:"published",title:"Created on",type:i.RJ.dateRange}],isExpansionEnabled:!1}),{result:{data:r,total:u},isFetching:h,fetchError:d}=(0,o.i$)((0,n.Ng)({...t,hubSortFieldKeys:{name:"name",published:"published"}})),m=(0,n.PB)({...t,idProperty:"id",currentPageItems:r,totalItemCount:u,isLoading:h,selectionState:(0,l.$)({items:r,isEqual:(e,t)=>e.id===t.id})});return s.createElement(c.Provider,{value:{totalItemCount:u,isFetching:h,fetchError:d,tableControls:m}},e)}},90676:(e,t,r)=>{r.d(t,{Y:()=>k});var s=r(63696),i=r(49348),a=r(40319),n=r(16646),l=r(9425),o=r(77819),c=r(28516),u=r(3629),h=r(62101),d=r(1349),m=r(62520),p=r(91271),f=r(34066),b=r(17993);const g=({sbomId:e})=>{const{result:{total:t}}=(0,b.sl)(e,{page:{pageNumber:1,itemsPerPage:1}});return s.createElement(s.Fragment,null,t)};var v=r(36509),y=r(93962),E=r(24417),w=r(28644),x=r(89101);const q=({sbomId:e})=>{const{data:t,isFetching:r,fetchError:i}=(0,x.U)(e);return s.createElement(E.a,{isFetching:r,fetchError:i,isFetchingState:s.createElement(v.E,{screenreaderText:"Loading contents"}),fetchErrorState:s.createElement(y.J,{color:"red"},"Error")},s.createElement(w.n,{severities:t.summary.vulnerabilityStatus.affected.severities}))};var S=r(36390);const k=({})=>{const{isFetching:e,fetchError:t,totalItemCount:r,tableControls:b}=s.useContext(S.L),{numRenderedColumns:v,currentPageItems:y,propHelpers:{paginationProps:E,tableProps:w,getThProps:x,getTrProps:k,getTdProps:C},expansionDerivedState:{isCellExpanded:F}}=b,{downloadSBOM:R}=(0,p.m)();return s.createElement(s.Fragment,null,s.createElement(a.X,{...w,"aria-label":"sbom-table"},s.createElement(n.d,null,s.createElement(l.Tr,null,s.createElement(m.Ze,{...b},s.createElement(o.Th,{...x({columnKey:"name"})}),s.createElement(o.Th,{...x({columnKey:"version"})}),s.createElement(o.Th,{...x({columnKey:"supplier"})}),s.createElement(o.Th,{...x({columnKey:"published"})}),s.createElement(o.Th,{...x({columnKey:"packages"})}),s.createElement(o.Th,{...x({columnKey:"vulnerabilities"})})))),s.createElement(m.nJ,{isLoading:e,isError:!!t,isNoData:0===r,numRenderedColumns:v},y.map(((e,t)=>s.createElement(c.N,{key:e.id,isExpanded:F(e)},s.createElement(l.Tr,{...k({item:e})},s.createElement(m.Oi,{...b,item:e,rowIndex:t},s.createElement(u.Td,{width:25,...C({columnKey:"name",isCompoundExpandToggle:!0,item:e,rowIndex:t})},s.createElement(i.k2,{to:`/sboms/${e.id}`},e.name)),s.createElement(u.Td,{width:15,modifier:"truncate",...C({columnKey:"version"})},e.described_by.map((e=>e.version)).filter((e=>e)).join(", ")),s.createElement(u.Td,{width:20,modifier:"truncate",...C({columnKey:"supplier"})},e.authors.join(", ")),s.createElement(u.Td,{width:10,...C({columnKey:"published"})},(0,f.Yq)(e.published)),s.createElement(u.Td,{width:10,...C({columnKey:"packages"})},s.createElement(g,{sbomId:e.id})),s.createElement(u.Td,{width:20,...C({columnKey:"vulnerabilities"})},s.createElement(q,{sbomId:e.id})),s.createElement(u.Td,{isActionCell:!0},s.createElement(h.G,{items:[{title:"Download",onClick:()=>{R(e.id,`${e.name}.json`)}}]}))))))))),s.createElement(d.n,{idPrefix:"sbom-table",isTop:!1,isCompact:!0,paginationProps:E}))}},17993:(e,t,r)=>{r.d(t,{Lx:()=>o,Si:()=>c,sl:()=>u});var s=r(39155),i=r(77347),a=r(40752),n=r(70611);const l="packages",o=(e={},t=!1)=>{const{data:r,isLoading:o,error:c,refetch:u}=(0,s.I)({queryKey:[l,e],queryFn:()=>(0,a.UD)({client:i.S,query:{...(0,n.kd)(e)}}),refetchInterval:!t&&5e3});return{result:{data:r?.data?.items||[],total:r?.data?.total??0,params:e},isFetching:o,fetchError:c,refetch:u}},c=e=>{const{data:t,isLoading:r,error:n}=(0,s.I)({queryKey:[l,e],queryFn:()=>(0,a.Y0)({client:i.S,path:{key:e}})});return{pkg:t?.data,isFetching:r,fetchError:n}},u=(e,t={})=>{const{data:r,isLoading:o,error:c,refetch:u}=(0,s.I)({queryKey:[l,"by-sbom",e,t],queryFn:()=>(0,a.Ad)({client:i.S,path:{id:e},query:{...(0,n.kd)(t)}})});return{result:{data:r?.data?.items||[],total:r?.data?.total??0,params:t},isFetching:o,fetchError:c,refetch:u}}},91728:(e,t,r)=>{r.d(t,{DH:()=>b,Qr:()=>f,i$:()=>d,rj:()=>m,sn:()=>p,zY:()=>g});var s=r(39155),i=r(3715),a=r(55037),n=r(77347),l=r(40752),o=r(24808),c=r(81230),u=r(70611);const h="sboms",d=(e={},t=!1)=>{const{data:r,isLoading:i,error:a,refetch:o}=(0,s.I)({queryKey:[h,e],queryFn:()=>(0,l.z1)({client:n.S,query:{...(0,u.kd)(e)}}),refetchInterval:!t&&5e3});return{result:{data:r?.data?.items||[],total:r?.data?.total??0,params:e??e},isFetching:i,fetchError:a,refetch:o}},m=e=>{const{data:t,isLoading:r,error:i}=(0,s.I)({queryKey:[h,e],queryFn:()=>void 0===e?Promise.resolve(void 0):(0,l.a7)({client:n.S,path:{id:e}}),enabled:void 0!==e});return{sbom:t?.data,isFetching:r,fetchError:i}},p=()=>{const e=(0,i.jE)();return(0,o.v)({parallel:!0,uploadFn:(e,t)=>(0,c.J4)(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:[h]})}})},f=(e,t={})=>{const{data:r,isLoading:i,error:a,refetch:o}=(0,s.I)({queryKey:["SBOMsQueryKeysss","by-package",e,t],queryFn:()=>(0,l.m9)({client:n.S,query:{id:e,...(0,u.kd)(t)}})});return{result:{data:r?.data?.items||[],total:r?.data?.total??0,params:t??t},isFetching:i,fetchError:a,refetch:o}},b=e=>{const{data:t,isLoading:r,error:i}=(0,s.I)({queryKey:[h,e,"advisory"],queryFn:()=>(0,l.bj)({client:n.S,path:{id:e}})});return{advisories:t?.data||[],isFetching:r,fetchError:i}},g=e=>{const t=(0,a.E)({queries:e.map((e=>({queryKey:[h,e,"advisory"],queryFn:()=>(0,l.bj)({client:n.S,path:{id:e}})})))});return{advisories:t.map((({data:e})=>e?.data||[])),isFetching:t.some((({isLoading:e})=>e)),fetchError:t.map((({error:e})=>e))}}},55037:(e,t,r)=>{r.d(t,{E:()=>b});var s=r(63696),i=r(13403),a=r(50653),n=r(47794),l=r(19106);function o(e,t){return e.filter((e=>!t.includes(e)))}var c=class extends n.Q{#e;#t;#r;#s;#i;#a;#n;#l;constructor(e,t,r){super(),this.#e=e,this.#s=r,this.#r=[],this.#i=[],this.#t=[],this.setQueries(t)}onSubscribe(){1===this.listeners.size&&this.#i.forEach((e=>{e.subscribe((t=>{this.#o(e,t)}))}))}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#i.forEach((e=>{e.destroy()}))}setQueries(e,t,r){this.#r=e,this.#s=t,i.j.batch((()=>{const e=this.#i,t=this.#c(this.#r);t.forEach((e=>e.observer.setOptions(e.defaultedQueryOptions,r)));const s=t.map((e=>e.observer)),i=s.map((e=>e.getCurrentResult())),a=s.some(((t,r)=>t!==e[r]));(e.length!==s.length||a)&&(this.#i=s,this.#t=i,this.hasListeners()&&(o(e,s).forEach((e=>{e.destroy()})),o(s,e).forEach((e=>{e.subscribe((t=>{this.#o(e,t)}))})),this.#u()))}))}getCurrentResult(){return this.#t}getQueries(){return this.#i.map((e=>e.getCurrentQuery()))}getObservers(){return this.#i}getOptimisticResult(e,t){const r=this.#c(e).map((e=>e.observer.getOptimisticResult(e.defaultedQueryOptions)));return[r,e=>this.#h(e??r,t),()=>this.#d(r,e)]}#d(e,t){const r=this.#c(t);return r.map(((t,s)=>{const i=e[s];return t.defaultedQueryOptions.notifyOnChangeProps?i:t.observer.trackResult(i,(e=>{r.forEach((t=>{t.observer.trackProp(e)}))}))}))}#h(e,t){return t?(this.#a&&this.#t===this.#l&&t===this.#n||(this.#n=t,this.#l=this.#t,this.#a=(0,l.BH)(this.#a,t(e))),this.#a):e}#c(e){const t=new Map(this.#i.map((e=>[e.options.queryHash,e]))),r=[];return e.forEach((e=>{const s=this.#e.defaultQueryOptions(e),i=t.get(s.queryHash);if(i)r.push({defaultedQueryOptions:s,observer:i});else{const e=this.#i.find((e=>e.options.queryHash===s.queryHash));r.push({defaultedQueryOptions:s,observer:e??new a.$(this.#e,s)})}})),r.sort(((t,r)=>e.findIndex((e=>e.queryHash===t.defaultedQueryOptions.queryHash))-e.findIndex((e=>e.queryHash===r.defaultedQueryOptions.queryHash))))}#o(e,t){const r=this.#i.indexOf(e);-1!==r&&(this.#t=function(e,t,r){const s=e.slice(0);return s[t]=r,s}(this.#t,r,t),this.#u())}#u(){this.hasListeners()&&this.#a!==this.#h(this.#d(this.#t,this.#r),this.#s?.combine)&&i.j.batch((()=>{this.listeners.forEach((e=>{e(this.#t)}))}))}},u=r(3715),h=r(57860),d=r(57202),m=r(23500),p=r(26737),f=r(908);function b({queries:e,...t},r){const n=(0,u.jE)(r),l=(0,h.w)(),o=(0,d.h)(),b=s.useMemo((()=>e.map((e=>{const t=n.defaultQueryOptions(e);return t._optimisticResults=l?"isRestoring":"optimistic",t}))),[e,n,l]);b.forEach((e=>{(0,p.jv)(e),(0,m.LJ)(e,o)})),(0,m.wZ)(o);const[g]=s.useState((()=>new c(n,b,t))),[v,y,E]=g.getOptimisticResult(b,t.combine);s.useSyncExternalStore(s.useCallback((e=>l?f.l:g.subscribe(i.j.batchCalls(e))),[g,l]),(()=>g.getCurrentResult()),(()=>g.getCurrentResult())),s.useEffect((()=>{g.setQueries(b,t,{listeners:!1})}),[b,t,g]);const w=v.some(((e,t)=>(0,p.EU)(b[t],e)))?v.flatMap(((e,t)=>{const r=b[t];if(r){const t=new a.$(n,r);if((0,p.EU)(r,e))return(0,p.iL)(r,t,o);(0,p.nE)(e,l)&&(0,p.iL)(r,t,o)}return[]})):[];if(w.length>0)throw Promise.all(w);const x=v.find(((e,t)=>{const r=b[t];return r&&(0,m.$1)({result:e,errorResetBoundary:o,throwOnError:r.throwOnError,query:n.getQueryCache().get(r.queryHash)})}));if(x?.error)throw x.error;return y(E())}}}]);
//# sourceMappingURL=477.ec0a405a.min.js.map