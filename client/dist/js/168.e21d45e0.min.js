"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([[168],{63095:(t,e,r)=>{r.d(e,{w:()=>i});var n=r(63696),s=r(50705);const i=t=>{const{pushNotification:e}=n.useContext(s.K);return(r,n)=>{let s="";s="string"==typeof t?t:t(r,n),e({title:s,variant:"danger"})}}},57772:(t,e,r)=>{r.r(e),r.d(e,{default:()=>x});var n=r(63696),s=r(49348),i=r(68430),a=r(20653),o=r(35048),u=r(4433),l=r(85578),c=r(16646),d=r(31065),h=r(77819),m=r(28516),p=r(3629),E=r(62101),y=r(86820),g=r(33273),b=r(1349),v=r(62520),f=r(70611),P=r(5098),C=r(7616),M=r(6841),S=r(40752),O=r(77347);var T=r(4628),K=r(63095);const x=()=>{const{result:t}=((t={},e=!1)=>{const r=(0,C.I)({queryKey:["organizations",t],queryFn:()=>(0,M.q)((0,S.J3)({client:O.S,query:{...(0,f.kd)(t)}})),refetchInterval:!e&&5e3});return{...(0,M.S)(r),result:{data:r.data?.items||[],total:r.data?.total??0,params:t}}})({page:{pageNumber:1,itemsPerPage:1e3}}),e=(0,f.MM)({tableName:"products",persistenceKeyPrefix:y.rt.advisories,columnNames:{name:"Name",vendor:"Vendor",versions:"Versions"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["name"],isFilterEnabled:!0,filterCategories:[{categoryKey:"",title:"Filter text",placeholderText:"Search",type:g.RJ.search},{categoryKey:"organization",title:"Organization",placeholderText:"Organization",type:g.RJ.multiselect,selectOptions:[...(t.data??[]).map((t=>({value:t.id,label:t.name})))]}],isExpansionEnabled:!1}),{result:{data:r,total:x},isFetching:R,fetchError:q}=(0,T.M3)((0,f.Ng)({...e,hubSortFieldKeys:{name:"name"}})),w=(0,T.lY)((0,K.w)("Error occurred while deleting the product")),k=(0,f.PB)({...e,idProperty:"id",currentPageItems:r,totalItemCount:x,isLoading:R,selectionState:(0,P.$)({items:r,isEqual:(t,e)=>t.id===e.id})}),{numRenderedColumns:F,currentPageItems:I,propHelpers:{toolbarProps:N,filterToolbarProps:_,paginationToolbarItemProps:D,paginationProps:L,tableProps:z,getThProps:J,getTrProps:U,getTdProps:j,getExpandedContentTdProps:B},expansionDerivedState:{isCellExpanded:V}}=k;return n.createElement(n.Fragment,null,n.createElement(i.d8,null,n.createElement("div",{style:{backgroundColor:"var(--pf-v5-global--BackgroundColor--100)"}},n.createElement(a.M,{...N},n.createElement(o.P,null,n.createElement(g.Us,{showFiltersSideBySide:!0,..._}),n.createElement(u.T,{...D},n.createElement(b.n,{idPrefix:"product-table",isTop:!0,paginationProps:L})))),n.createElement(l.X,{...z,"aria-label":"Product table"},n.createElement(c.d,null,n.createElement(d.Tr,null,n.createElement(v.Ze,{...k},n.createElement(h.Th,{...J({columnKey:"name"})}),n.createElement(h.Th,{...J({columnKey:"vendor"})}),n.createElement(h.Th,{...J({columnKey:"versions"})})))),n.createElement(v.nJ,{isLoading:R,isError:!!q,isNoData:0===x,numRenderedColumns:F},I.map(((t,e)=>n.createElement(m.N,{key:t.id,isExpanded:V(t)},n.createElement(d.Tr,{...U({item:t})},n.createElement(v.Oi,{...k,item:t,rowIndex:e},n.createElement(p.Td,{width:30,...j({columnKey:"name"})},n.createElement(s.k2,{to:`/products/${t.id}`},t.name)),n.createElement(p.Td,{width:50,modifier:"truncate",...j({columnKey:"vendor"})},t.vendor?.name),n.createElement(p.Td,{width:20,modifier:"truncate",...j({columnKey:"versions"})},t.versions?.length),n.createElement(p.Td,{isActionCell:!0},n.createElement(E.G,{items:[{title:"Delete",onClick:()=>w.mutate(t.id)}]}))))))))),n.createElement(b.n,{idPrefix:"product-table",isTop:!1,isCompact:!0,paginationProps:L}))))}},6841:(t,e,r)=>{r.d(e,{S:()=>s,q:()=>n});const n=async t=>(await t).data,s=t=>({isFetching:t.isLoading,fetchError:t.error,refetch:t.refetch})},4628:(t,e,r)=>{r.d(e,{M3:()=>c,Vh:()=>d,lY:()=>h});var n=r(7616),s=r(26667),i=r(40752),a=r(77347),o=r(6841),u=r(70611);const l="products",c=(t={},e=!1)=>{const r=(0,n.I)({queryKey:[l,t],queryFn:()=>(0,o.q)((0,i.Pt)({client:a.S,query:{...(0,u.kd)(t)}})),refetchInterval:!e&&5e3});return{...(0,o.S)(r),result:{data:r.data?.items||[],total:r.data?.total??0,params:t}}},d=t=>{const e=(0,n.I)({queryKey:[l,t],queryFn:()=>(0,o.q)((0,i.oo)({client:a.S,path:{id:t}}))});return{...(0,o.S)(e),product:e.data}},h=(t,e)=>(0,s.n)({mutationFn:t=>(0,o.q)((0,i.DD)({client:a.S,path:{id:t}})),mutationKey:[l],onSuccess:e,onError:t})},26667:(t,e,r)=>{r.d(e,{n:()=>d});var n=r(63696),s=r(9304),i=r(13403),a=r(47794),o=r(19106),u=class extends a.Q{#t;#e=void 0;#r;#n;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.f8)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.EN)(e.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():"pending"===this.#r?.state.status&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#i()}mutate(t,e){return this.#n=e,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#s(){const t=this.#r?.state??(0,s.$)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#i(t){i.j.batch((()=>{if(this.#n&&this.hasListeners()){const e=this.#e.variables,r=this.#e.context;"success"===t?.type?(this.#n.onSuccess?.(t.data,e,r),this.#n.onSettled?.(t.data,null,e,r)):"error"===t?.type&&(this.#n.onError?.(t.error,e,r),this.#n.onSettled?.(void 0,t.error,e,r))}this.listeners.forEach((t=>{t(this.#e)}))}))}},l=r(3715),c=r(908);function d(t,e){const r=(0,l.jE)(e),[s]=n.useState((()=>new u(r,t)));n.useEffect((()=>{s.setOptions(t)}),[s,t]);const a=n.useSyncExternalStore(n.useCallback((t=>s.subscribe(i.j.batchCalls(t))),[s]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),o=n.useCallback(((t,e)=>{s.mutate(t,e).catch(c.l)}),[s]);if(a.error&&(0,c.G)(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}}}]);
//# sourceMappingURL=168.e21d45e0.min.js.map