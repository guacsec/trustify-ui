"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([[491],{67837:(e,a,r)=>{r.d(a,{g:()=>n});var o=r(63696),t=r(23546),s=r(891),l=r(71743);const n=({value:e,defaultIsOpen:a})=>o.createElement(t.o,{isVertical:!0,defaultIsOpen:a,numLabels:2},Object.entries(e).sort((([e],[a])=>a.localeCompare(e))).map((([e,a],r)=>o.createElement(s.J,{key:r,color:"blue"},o.createElement(l.P,{content:`${e}=${a}`})))))},24808:(e,a,r)=>{r.d(a,{v:()=>d});var o=r(63696),t=r(64917),s=r(86820);const l="cancelled",n=(e,a)=>{switch(a.type){case"queueUpload":return{...e,uploads:new Map(e.uploads).set(a.payload.file,{...e.uploads.get(a.payload.file)||{progress:0,status:"queued",error:void 0,response:void 0,wasCancelled:!1,cancelFn:void 0},status:"queued",cancelFn:a.payload.cancelFn})};case"updateUploadProgress":return{...e,uploads:new Map(e.uploads).set(a.payload.file,{...e.uploads.get(a.payload.file)||{progress:0,status:"queued",error:void 0,response:void 0,wasCancelled:!1,cancelFn:void 0},progress:a.payload.progress||0,status:"inProgress"})};case"finishUploadSuccessfully":return{...e,uploads:new Map(e.uploads).set(a.payload.file,{...e.uploads.get(a.payload.file),status:"complete",response:a.payload.response})};case"finishUploadWithError":return{...e,uploads:new Map(e.uploads).set(a.payload.file,{...e.uploads.get(a.payload.file),status:"complete",error:a.payload.error,wasCancelled:a.payload.error?.message===l})};case"removeUpload":{const r=new Map(e.uploads);return r.delete(a.payload.file),{...e,uploads:r}}default:throw new Error}},d=({parallel:e,uploadFn:a,onSuccess:r,onError:d})=>{const[c,p]=o.useReducer(n,{uploads:new Map});return{uploads:c.uploads,handleUpload:o=>{const n=[];for(let e=0;e<o.length;e++){const a=o[e],c=new FormData;c.set(s.fs,a);const u=t.A.CancelToken.source(),i={headers:{"X-Requested-With":"XMLHttpRequest"},onUploadProgress:e=>{const r=e.total??1,o=e.loaded/r*100;p({type:"updateUploadProgress",payload:{file:a,progress:Math.round(o)}})},cancelToken:u.token};p({type:"queueUpload",payload:{file:a,cancelFn:u}});const y={formData:c,config:i,thenFn:e=>{p({type:"finishUploadSuccessfully",payload:{file:a,response:e}}),r&&r(e,a)},catchFn:e=>{p({type:"finishUploadWithError",payload:{file:a,error:e}}),e.message!==l&&d&&d(e,a)}};n.push(y)}e?n.forEach((e=>{a(e.formData,e.config).then(e.thenFn).catch(e.catchFn)})):n.reduce((async(e,r)=>(await e,a(r.formData,r.config).then(r.thenFn).catch(r.catchFn))),Promise.resolve())},handleCancelUpload:e=>{c.uploads.get(e)?.cancelFn?.cancel(l)},handleRemoveUpload:e=>{p({type:"removeUpload",payload:{file:e}})}}}},22671:(e,a,r)=>{r.d(a,{rj:()=>y,i$:()=>i,Qr:()=>g,cF:()=>h,sn:()=>f});var o=r(7616),t=r(3715),s=r(26667),l=r(81230),n=r(24808),d=r(61991);const c=(0,d.UU)((0,d.Z3)());var p=r(77347);const u="sboms",i=(e={},a=!1)=>{const{data:r,isLoading:t,error:s,refetch:n}=(0,o.I)({queryKey:[u,e],queryFn:()=>(0,l.ll)(e),refetchInterval:!a&&5e3});return{result:{data:r?.data||[],total:r?.total??0,params:r?.params??e},isFetching:t,fetchError:s,refetch:n}},y=e=>{const{data:a,isLoading:r,error:t}=(0,o.I)({queryKey:[u,e],queryFn:async()=>{return void 0===e?void 0:(await(a={client:p.S,path:{id:e}},(a?.client??c).get({...a,url:"/api/v1/sbom/{id}"}))).data;var a},enabled:void 0!==e});return{sbom:a,isFetching:r,fetchError:t}},f=()=>{const e=(0,t.jE)();return(0,n.v)({parallel:!0,uploadFn:(e,a)=>(0,l.J4)(e,a),onSuccess:()=>{e.invalidateQueries({queryKey:[u]})}})},h=(e,a)=>{const r=(0,t.jE)();return(0,s.n)({mutationFn:e=>(0,l.aB)(e.id,e.labels??{}),onSuccess:(a,o)=>{e(),r.invalidateQueries({queryKey:[u]})},onError:a})},g=(e,a={})=>{const{data:r,isLoading:t,error:s,refetch:n}=(0,o.I)({queryKey:[u,"by-package",e,a],queryFn:()=>(0,l.hr)(e,a)});return{result:{data:r?.data||[],total:r?.total??0,params:r?.params??a},isFetching:t,fetchError:s,refetch:n}}}}]);
//# sourceMappingURL=491.f37a0fa8.min.js.map