"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([[53],{24417:(e,t,r)=>{r.d(t,{a:()=>c});var a=r(63696),n=r(59394),l=r(23338),i=r(75855);const c=e=>e.isFetching?a.createElement(n.a,null,a.createElement(l.y,null)):e.fetchError?a.createElement(i.q,null):e.children},33872:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Q});var a=r(63696),n=r(49348),l=r(2620),i=r(68430),c=r(98261),s=r(75530),o=r(48783),m=r(80876),u=r(24417),E=r(52302),d=r(69935),h=r(47883);r(91728);const v=({source:e,isFetching:t,fetchError:r,height:n="sizeToFit"})=>{const[l,i]=a.useMemo((()=>e?"object"==typeof e?[JSON.stringify(e,null,2),h.T.json]:"string"==typeof e?[e,h.T.plaintext]:["Not supported format",h.T.plaintext]:[e,void 0]),[e]);return a.createElement(a.Fragment,null,a.createElement(u.a,{isFetching:t,fetchError:r},l&&a.createElement(h.B,{isDarkTheme:!0,isLineNumbersVisible:!0,isReadOnly:!0,isMinimapVisible:!0,isLanguageLabelVisible:!0,code:l??"",language:i,height:n})))},y=({advisoryId:e,height:t="sizeToFit"})=>{const{source:r,isFetching:n,fetchError:l}=(0,d.qF)(e);return a.createElement(a.Fragment,null,a.createElement(v,{source:r,isFetching:n,fetchError:l,height:t}))};var g=r(23713),f=r(38914),p=r(57901),b=r(76072),F=r(97299),k=r(17327),N=r(64361),S=r(71603),q=r(65753),w=r(24974),C=r(21639),I=r(3939),K=r(77635),_=r(40360),A=r(10410),T=r(80254),L=r(88112),j=r(85278),O=r(94279),x=r(16172),B=r(20061);const V=({value:e})=>a.createElement(O.B8,{isPlain:!0},e.map(((e,t)=>a.createElement(x.c,{key:t},a.createElement(B.Ck,{isReadOnly:!0,hoverTip:"Copy",clickTip:"Copied"},e)))));var Z=r(67837),H=r(50705);const J=({advisory:e})=>{const{pushNotification:t}=a.useContext(H.K),[r,n]=a.useState(!1),{mutate:l}=(0,d.uJ)((()=>{}),(e=>{t({title:"Error while updating labels",variant:"danger"})}));return a.createElement(a.Fragment,null,a.createElement(f.B,{hasGutter:!0},a.createElement(p.a,null,a.createElement(b.x,{hasGutter:!0},a.createElement(F.E,{md:4},a.createElement(k.Z,{isFullHeight:!0},a.createElement(N.Z,null,"General view"),a.createElement(S.b,null,a.createElement(T.V,{advisory:e})))),a.createElement(F.E,{md:4},a.createElement(k.Z,{isFullHeight:!0},a.createElement(N.Z,null,"Issuer"),a.createElement(S.b,null,a.createElement(L.N,{value:e})))),a.createElement(F.E,{md:4},a.createElement(k.Z,{isFullHeight:!0},a.createElement(N.Z,null,"System"),a.createElement(S.b,null,a.createElement(q.B,null,a.createElement(w.W,null,a.createElement(C.X,null,"Hashes"),a.createElement(I.d,null,e.hashes&&a.createElement(V,{value:e.hashes}))),a.createElement(w.W,null,a.createElement(C.X,null,"Labels ","",a.createElement(K.$n,{variant:K.Ak.link,size:"sm",icon:a.createElement(A.Ay,null),iconPosition:"end",onClick:()=>n(!0)},"Edit")),a.createElement(I.d,null,a.createElement("div",{className:"pf-v5-c-form"},a.createElement(_.g,null,a.createElement("div",{className:"pf-v5-c-form-control",style:{padding:10}},e.labels&&a.createElement(Z.g,{defaultIsOpen:!0,value:e.labels}))))))))))))),r&&a.createElement(j.x,{resourceName:e.identifier,value:e.labels??{},onSave:t=>{(t=>{l({...e,labels:t})})(t),n(!1)},onClose:()=>n(!1)}))};var D=r(32343);const Q=()=>{const e=(0,m.Lu)(m.vO.ADVISORY_ID),{advisory:t,isFetching:r,fetchError:h}=(0,d.vy)(e),{downloadAdvisory:v}=(0,g.m)();return a.createElement(a.Fragment,null,a.createElement(i.d8,{variant:"light"},a.createElement(l.A,{breadcrumbs:a.createElement(c.Q,null,a.createElement(s.J,{key:"advisories"},a.createElement(n.N_,{to:"/advisories"},"Advisories")),a.createElement(s.J,{isActive:!0},"Advisory details")),actionButtons:[{children:a.createElement(a.Fragment,null,a.createElement(o.Ay,null)," Download"),variant:"secondary",onClick:()=>{e&&v(e,`${t?.identifier}.json`)}}],pageHeading:{title:t?.identifier??"",label:t?.average_severity?{children:a.createElement(E.h,{value:t.average_severity}),isCompact:!0}:void 0},tabs:[{eventKey:"overview",title:"Overview",children:a.createElement("div",{className:"pf-v5-u-m-md"},a.createElement(u.a,{isFetching:r,fetchError:h},t&&a.createElement(J,{advisory:t})))},{eventKey:"vulnerabilities",title:"Vulnerabilities",children:a.createElement("div",{className:"pf-v5-u-m-md"},a.createElement(u.a,{isFetching:r,fetchError:h},a.createElement(D.j,{enableToolbar:!0,vulnerabilities:t?.vulnerabilities||[]})))},{eventKey:"source",title:"Source",children:a.createElement("div",{className:"pf-v5-u-m-md"},e&&a.createElement(y,{advisoryId:e,height:"645px"}))}]})))}},91728:(e,t,r)=>{r.d(t,{Qr:()=>y,cF:()=>v,i$:()=>u,l6:()=>d,rj:()=>E,sn:()=>h});var a=r(7616),n=r(26667),l=r(3715),i=r(81230),c=r(24808),s=r(40752),o=r(77347);const m="sboms",u=(e={},t=!1)=>{const{data:r,isLoading:n,error:l,refetch:c}=(0,a.I)({queryKey:[m,e],queryFn:()=>(0,i.ll)(e),refetchInterval:!t&&5e3});return{result:{data:r?.data||[],total:r?.total??0,params:r?.params??e},isFetching:n,fetchError:l,refetch:c}},E=e=>{const{data:t,isLoading:r,error:n}=(0,a.I)({queryKey:[m,e],queryFn:async()=>(await(0,s.a7)({client:o.S,path:{id:e}})).data,enabled:void 0!==e});return{sbom:t,isFetching:r,fetchError:n}},d=(e,t)=>(0,n.n)({mutationFn:async e=>(await(0,s.bS)({client:o.S,path:{id:e}})).data,mutationKey:[m],onSuccess:t,onError:e}),h=()=>{const e=(0,l.jE)();return(0,c.v)({parallel:!0,uploadFn:(e,t)=>(0,i.J4)(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:[m]})}})},v=(e,t)=>{const r=(0,l.jE)();return(0,n.n)({mutationFn:e=>(0,i.aB)(e.id,e.labels??{}),onSuccess:(t,a)=>{e(),r.invalidateQueries({queryKey:[m]})},onError:t})},y=(e,t={})=>{const{data:r,isLoading:n,error:l,refetch:c}=(0,a.I)({queryKey:[m,"by-package",e,t],queryFn:()=>(0,i.hr)(e,t)});return{result:{data:r?.data||[],total:r?.total??0,params:r?.params??t},isFetching:n,fetchError:l,refetch:c}}}}]);
//# sourceMappingURL=53.6aec250a.min.js.map