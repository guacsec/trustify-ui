"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([[544],{1964:(t,e,r)=>{r.r(e),r.d(e,{default:()=>S});var n=r(63696),s=r(49348),i=r(68430),a=r(20653),o=r(35048),u=r(4433),l=r(85578),c=r(16646),d=r(31065),h=r(77819),m=r(28516),p=r(3629),E=r(62101),g=r(86820),y=r(33273),b=r(1349),f=r(62520),v=r(70611),P=r(5098),C=r(50705),M=r(7616),O=r(77347),T=r(40752);var K=r(4628);const S=()=>{const{result:t}=((t={},e=!1)=>{const{data:r,isLoading:n,error:s,refetch:i}=(0,M.I)({queryKey:["organizations",t],queryFn:()=>(0,T.J3)({client:O.S,query:{...(0,v.kd)(t)}}),refetchInterval:!e&&5e3});return{result:{data:r?.data?.items||[],total:r?.data?.total??0,params:t},isFetching:n,fetchError:s,refetch:i}})({page:{pageNumber:1,itemsPerPage:1e3}}),e=(0,v.MM)({tableName:"products",persistenceKeyPrefix:g.rt.advisories,columnNames:{name:"Name",vendor:"Vendor",versions:"Versions"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["name"],isFilterEnabled:!0,filterCategories:[{categoryKey:"",title:"Filter text",placeholderText:"Search",type:y.RJ.search},{categoryKey:"organization",title:"Organization",placeholderText:"Organization",type:y.RJ.multiselect,selectOptions:[...(t.data??[]).map((t=>({value:t.id,label:t.name})))]}],isExpansionEnabled:!1}),{result:{data:r,total:S},isFetching:x,fetchError:R}=(0,K.M3)((0,v.Ng)({...e,hubSortFieldKeys:{name:"name"}})),k=(0,K.lY)((t=>{const{pushNotification:e}=n.useContext(C.K);return(r,n)=>{let s="";s=t,e({title:s,variant:"danger"})}})("Error occurred while deleting the product")),F=(0,v.PB)({...e,idProperty:"id",currentPageItems:r,totalItemCount:S,isLoading:x,selectionState:(0,P.$)({items:r,isEqual:(t,e)=>t.id===e.id})}),{numRenderedColumns:w,currentPageItems:I,propHelpers:{toolbarProps:N,filterToolbarProps:q,paginationToolbarItemProps:L,paginationProps:_,tableProps:D,getThProps:z,getTrProps:J,getTdProps:U,getExpandedContentTdProps:j},expansionDerivedState:{isCellExpanded:B}}=F;return n.createElement(n.Fragment,null,n.createElement(i.d8,null,n.createElement("div",{style:{backgroundColor:"var(--pf-v5-global--BackgroundColor--100)"}},n.createElement(a.M,{...N},n.createElement(o.P,null,n.createElement(y.Us,{showFiltersSideBySide:!0,...q}),n.createElement(u.T,{...L},n.createElement(b.n,{idPrefix:"product-table",isTop:!0,paginationProps:_})))),n.createElement(l.X,{...D,"aria-label":"Product table"},n.createElement(c.d,null,n.createElement(d.Tr,null,n.createElement(f.Ze,{...F},n.createElement(h.Th,{...z({columnKey:"name"})}),n.createElement(h.Th,{...z({columnKey:"vendor"})}),n.createElement(h.Th,{...z({columnKey:"versions"})})))),n.createElement(f.nJ,{isLoading:x,isError:!!R,isNoData:0===S,numRenderedColumns:w},I.map(((t,e)=>n.createElement(m.N,{key:t.id,isExpanded:B(t)},n.createElement(d.Tr,{...J({item:t})},n.createElement(f.Oi,{...F,item:t,rowIndex:e},n.createElement(p.Td,{width:30,...U({columnKey:"name"})},n.createElement(s.k2,{to:`/products/${t.id}`},t.name)),n.createElement(p.Td,{width:50,modifier:"truncate",...U({columnKey:"vendor"})},t.vendor?.name),n.createElement(p.Td,{width:20,modifier:"truncate",...U({columnKey:"versions"})},t.versions?.length),n.createElement(p.Td,{isActionCell:!0},n.createElement(E.G,{items:[{title:"Delete",onClick:()=>k.mutate(t.id)}]}))))))))),n.createElement(b.n,{idPrefix:"product-table",isTop:!1,isCompact:!0,paginationProps:_}))))}},4628:(t,e,r)=>{r.d(e,{M3:()=>l,Vh:()=>c,lY:()=>d});var n=r(7616),s=r(26667),i=r(77347),a=r(40752),o=r(70611);const u="products",l=(t={},e=!1)=>{const{data:r,isLoading:s,error:l,refetch:c}=(0,n.I)({queryKey:[u,t],queryFn:()=>(0,a.Pt)({client:i.S,query:{...(0,o.kd)(t)}}),refetchInterval:!e&&5e3});return{result:{data:r?.data?.items||[],total:r?.data?.total??0,params:t},isFetching:s,fetchError:l,refetch:c}},c=t=>{const{data:e,isLoading:r,error:s}=(0,n.I)({queryKey:[u,t],queryFn:()=>(0,a.oo)({client:i.S,path:{id:t}})});return{product:e?.data,isFetching:r,fetchError:s}},d=(t,e)=>(0,s.n)({mutationFn:async t=>(await(0,a.DD)({client:i.S,path:{id:t}})).data,mutationKey:[u],onSuccess:e,onError:t})},26667:(t,e,r)=>{r.d(e,{n:()=>d});var n=r(63696),s=r(9304),i=r(13403),a=r(47794),o=r(19106),u=class extends a.Q{#t;#e=void 0;#r;#n;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.f8)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.EN)(e.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():"pending"===this.#r?.state.status&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#i()}mutate(t,e){return this.#n=e,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#s(){const t=this.#r?.state??(0,s.$)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#i(t){i.j.batch((()=>{if(this.#n&&this.hasListeners()){const e=this.#e.variables,r=this.#e.context;"success"===t?.type?(this.#n.onSuccess?.(t.data,e,r),this.#n.onSettled?.(t.data,null,e,r)):"error"===t?.type&&(this.#n.onError?.(t.error,e,r),this.#n.onSettled?.(void 0,t.error,e,r))}this.listeners.forEach((t=>{t(this.#e)}))}))}},l=r(3715),c=r(908);function d(t,e){const r=(0,l.jE)(e),[s]=n.useState((()=>new u(r,t)));n.useEffect((()=>{s.setOptions(t)}),[s,t]);const a=n.useSyncExternalStore(n.useCallback((t=>s.subscribe(i.j.batchCalls(t))),[s]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),o=n.useCallback(((t,e)=>{s.mutate(t,e).catch(c.l)}),[s]);if(a.error&&(0,c.G)(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}}}]);
//# sourceMappingURL=544.e547d7b5.min.js.map