"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([[168],{81230:(t,e,r)=>{r.d(e,{EX:()=>M,FZ:()=>C,Ix:()=>P,J4:()=>T,J8:()=>v,K4:()=>S,N2:()=>g,Q6:()=>$,U0:()=>O,_e:()=>f,h6:()=>p,hP:()=>b,iV:()=>x,sx:()=>K,uK:()=>m,wJ:()=>y,yZ:()=>E});var n=r(64917),s=r(86820),a=r(63260);const i="/api",o=i+"/v1/organization",u=i+"/v1/advisory",l=i+"/v1/vulnerability",c=i+"/v1/sbom",d=i+"/v1/importer",h=(t,e={},r=[])=>{const s=(0,a.IY)(e);return r.forEach((t=>s.append(t.key,t.value))),n.A.get(t,{params:s}).then((({data:t})=>({data:t.items,total:t.total,params:e})))},p=(t={})=>h(o,t),m=(t={})=>h(u,t),y=t=>n.A.get(`${u}/${t}`).then((t=>t.data)),g=t=>n.A.get(`${u}/${t}/download`).then((t=>t.data)),E=t=>n.A.get(`${u}/${t}/download`,{responseType:"arraybuffer",headers:{Accept:"text/plain",responseType:"blob"}}),b=(t,e)=>t.get(s.fs).text().then((t=>{const r=JSON.parse(t);return n.A.post(`${u}`,r,e)})),f=(t,e)=>n.A.put(`${u}/${t}/label`,e).then((t=>t.data)),v=t=>n.A.get(`${l}/${t}/source`,{responseType:"arraybuffer",headers:{Accept:"text/plain",responseType:"blob"}}),$=t=>n.A.get(`${c}/${t}`).then((t=>t.data)),P=t=>n.A.get(`${c}/${t}/download`,{responseType:"arraybuffer",headers:{Accept:"text/plain",responseType:"blob"}}),T=(t,e)=>t.get(s.fs).text().then((t=>{const r=JSON.parse(t);return n.A.post(`${c}`,r,e)})),x=()=>n.A.get(d).then((t=>t.data)),C=(t,e)=>n.A.post(`${d}/${t}`,e),O=(t,e)=>n.A.put(`${d}/${t}`,e).then((t=>t.data)),M=t=>n.A.post(`${d}/${t}/force`).then((t=>t.data)),S=t=>n.A.delete(`${d}/${t}`).then((t=>t.data)),K=t=>h(`${d}/${t}/report`,{})},63095:(t,e,r)=>{r.d(e,{w:()=>a});var n=r(63696),s=r(50705);const a=t=>{const{pushNotification:e}=n.useContext(s.K);return(r,n)=>{let s="";s="string"==typeof t?t:t(r,n),e({title:s,variant:"danger"})}}},57772:(t,e,r)=>{r.r(e),r.d(e,{default:()=>S});var n=r(63696),s=r(49348),a=r(68430),i=r(1180),o=r(72785),u=r(20653),l=r(35048),c=r(4433),d=r(85578),h=r(16646),p=r(31065),m=r(77819),y=r(28516),g=r(3629),E=r(62101),b=r(86820),f=r(33273),v=r(1349),$=r(62520),P=r(70611),T=r(5098),x=r(7616),C=r(81230);var O=r(4628),M=r(63095);const S=()=>{const{result:t}=((t={},e=!1)=>{const{data:r,isLoading:n,error:s,refetch:a}=(0,x.I)({queryKey:["organizations",t],queryFn:()=>(0,C.h6)(t),refetchInterval:!e&&5e3});return{result:{data:r?.data||[],total:r?.total??0,params:r?.params??t},isFetching:n,fetchError:s,refetch:a}})({page:{pageNumber:1,itemsPerPage:1e3}}),e=(0,P.MM)({tableName:"products",persistenceKeyPrefix:b.rt.advisories,columnNames:{name:"Name",vendor:"Vendor",versions:"Versions"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["name"],isFilterEnabled:!0,filterCategories:[{categoryKey:"",title:"Filter text",placeholderText:"Search",type:f.RJ.search},{categoryKey:"organization",title:"Organization",placeholderText:"Organization",type:f.RJ.multiselect,selectOptions:[...(t.data??[]).map((t=>({value:t.id,label:t.name})))]}],isExpansionEnabled:!1}),{result:{data:r,total:S},isFetching:K,fetchError:A}=(0,O.M3)((0,P.Ng)({...e,hubSortFieldKeys:{name:"name"}})),w=(0,O.lY)((0,M.w)("Error occurred while deleting the product")),R=(0,P.PB)({...e,idProperty:"id",currentPageItems:r,totalItemCount:S,isLoading:K,selectionState:(0,T.$)({items:r,isEqual:(t,e)=>t.id===e.id})}),{numRenderedColumns:k,currentPageItems:F,propHelpers:{toolbarProps:I,filterToolbarProps:N,paginationToolbarItemProps:q,paginationProps:J,tableProps:_,getThProps:z,getTrProps:L,getTdProps:D,getExpandedContentTdProps:U},expansionDerivedState:{isCellExpanded:V}}=R;return n.createElement(n.Fragment,null,n.createElement(a.d8,{variant:a.zC.light},n.createElement(i.n,null,n.createElement(o.E,{component:"h1"},"Products"))),n.createElement(a.d8,null,n.createElement("div",{style:{backgroundColor:"var(--pf-v5-global--BackgroundColor--100)"}},n.createElement(u.M,{...I},n.createElement(l.P,null,n.createElement(f.Us,{showFiltersSideBySide:!0,...N}),n.createElement(c.T,{...q},n.createElement(v.n,{idPrefix:"product-table",isTop:!0,paginationProps:J})))),n.createElement(d.X,{..._,"aria-label":"Product table"},n.createElement(h.d,null,n.createElement(p.Tr,null,n.createElement($.Ze,{...R},n.createElement(m.Th,{...z({columnKey:"name"})}),n.createElement(m.Th,{...z({columnKey:"vendor"})}),n.createElement(m.Th,{...z({columnKey:"versions"})})))),n.createElement($.nJ,{isLoading:K,isError:!!A,isNoData:0===S,numRenderedColumns:k},F.map(((t,e)=>n.createElement(y.N,{key:t.id,isExpanded:V(t)},n.createElement(p.Tr,{...L({item:t})},n.createElement($.Oi,{...R,item:t,rowIndex:e},n.createElement(g.Td,{width:30,...D({columnKey:"name"})},n.createElement(s.k2,{to:`/products/${t.id}`},t.name)),n.createElement(g.Td,{width:50,modifier:"truncate",...D({columnKey:"vendor"})},t.vendor?.name),n.createElement(g.Td,{width:20,modifier:"truncate",...D({columnKey:"versions"})},t.versions?.length),n.createElement(g.Td,{isActionCell:!0},n.createElement(E.G,{items:[{title:"Delete",onClick:()=>w.mutate(t.id)}]}))))))))),n.createElement(v.n,{idPrefix:"product-table",isTop:!1,isCompact:!0,paginationProps:J}))))}},6841:(t,e,r)=>{r.d(e,{S:()=>s,q:()=>n});const n=async t=>(await t).data,s=t=>({isFetching:t.isLoading,fetchError:t.error,refetch:t.refetch})},4628:(t,e,r)=>{r.d(e,{M3:()=>c,Vh:()=>d,lY:()=>h});var n=r(7616),s=r(26667),a=r(40752),i=r(77347),o=r(6841),u=r(70611);const l="products",c=(t={},e=!1)=>{const r=(0,n.I)({queryKey:[l,t],queryFn:()=>(0,o.q)((0,a.Pt)({client:i.S,query:{...(0,u.kd)(t)}})),refetchInterval:!e&&5e3});return{...(0,o.S)(r),result:{data:r.data?.items||[],total:r.data?.total??0,params:t}}},d=t=>{const e=(0,n.I)({queryKey:[l,t],queryFn:()=>(0,o.q)((0,a.oo)({client:i.S,path:{id:t}}))});return{...(0,o.S)(e),product:e.data}},h=(t,e)=>(0,s.n)({mutationFn:t=>(0,o.q)((0,a.DD)({client:i.S,path:{id:t}})),mutationKey:[l],onSuccess:e,onError:t})},26667:(t,e,r)=>{r.d(e,{n:()=>d});var n=r(63696),s=r(9304),a=r(13403),i=r(47794),o=r(19106),u=class extends i.Q{#t;#e=void 0;#r;#n;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.f8)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.EN)(e.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():"pending"===this.#r?.state.status&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#a(t)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#a()}mutate(t,e){return this.#n=e,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#s(){const t=this.#r?.state??(0,s.$)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#a(t){a.j.batch((()=>{if(this.#n&&this.hasListeners()){const e=this.#e.variables,r=this.#e.context;"success"===t?.type?(this.#n.onSuccess?.(t.data,e,r),this.#n.onSettled?.(t.data,null,e,r)):"error"===t?.type&&(this.#n.onError?.(t.error,e,r),this.#n.onSettled?.(void 0,t.error,e,r))}this.listeners.forEach((t=>{t(this.#e)}))}))}},l=r(3715),c=r(908);function d(t,e){const r=(0,l.jE)(e),[s]=n.useState((()=>new u(r,t)));n.useEffect((()=>{s.setOptions(t)}),[s,t]);const i=n.useSyncExternalStore(n.useCallback((t=>s.subscribe(a.j.batchCalls(t))),[s]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),o=n.useCallback(((t,e)=>{s.mutate(t,e).catch(c.l)}),[s]);if(i.error&&(0,c.G)(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}}}]);
//# sourceMappingURL=168.38a1ac94.min.js.map