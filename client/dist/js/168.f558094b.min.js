"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([[168],{63095:(t,e,r)=>{r.d(e,{w:()=>i});var n=r(63696),s=r(50705);const i=t=>{const{pushNotification:e}=n.useContext(s.K);return(r,n)=>{let s="";s="string"==typeof t?t:t(r,n),e({title:s,variant:"danger"})}}},57772:(t,e,r)=>{r.r(e),r.d(e,{default:()=>R});var n=r(63696),s=r(49348),i=r(68430),a=r(1180),o=r(72785),u=r(20653),l=r(35048),c=r(4433),d=r(85578),h=r(16646),m=r(31065),p=r(77819),E=r(28516),g=r(3629),y=r(62101),b=r(86820),f=r(33273),v=r(1349),P=r(62520),C=r(70611),M=r(5098),O=r(7616),T=r(81230);var K=r(4628),x=r(63095);const R=()=>{const{result:t}=((t={},e=!1)=>{const{data:r,isLoading:n,error:s,refetch:i}=(0,O.I)({queryKey:["organizations",t],queryFn:()=>(0,T.h6)(t),refetchInterval:!e&&5e3});return{result:{data:r?.data||[],total:r?.total??0,params:r?.params??t},isFetching:n,fetchError:s,refetch:i}})({page:{pageNumber:1,itemsPerPage:1e3}}),e=(0,C.MM)({tableName:"products",persistenceKeyPrefix:b.rt.advisories,columnNames:{name:"Name",vendor:"Vendor",versions:"Versions"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["name"],isFilterEnabled:!0,filterCategories:[{categoryKey:"",title:"Filter text",placeholderText:"Search",type:f.RJ.search},{categoryKey:"organization",title:"Organization",placeholderText:"Organization",type:f.RJ.multiselect,selectOptions:[...(t.data??[]).map((t=>({value:t.id,label:t.name})))]}],isExpansionEnabled:!1}),{result:{data:r,total:R},isFetching:S,fetchError:w}=(0,K.M3)((0,C.Ng)({...e,hubSortFieldKeys:{name:"name"}})),F=(0,K.lY)((0,x.w)("Error occurred while deleting the product")),k=(0,C.PB)({...e,idProperty:"id",currentPageItems:r,totalItemCount:R,isLoading:S,selectionState:(0,M.$)({items:r,isEqual:(t,e)=>t.id===e.id})}),{numRenderedColumns:I,currentPageItems:N,propHelpers:{toolbarProps:q,filterToolbarProps:L,paginationToolbarItemProps:_,paginationProps:z,tableProps:D,getThProps:U,getTrProps:$,getTdProps:j,getExpandedContentTdProps:B},expansionDerivedState:{isCellExpanded:J}}=k;return n.createElement(n.Fragment,null,n.createElement(i.d8,{variant:i.zC.light},n.createElement(a.n,null,n.createElement(o.E,{component:"h1"},"Products"))),n.createElement(i.d8,null,n.createElement("div",{style:{backgroundColor:"var(--pf-v5-global--BackgroundColor--100)"}},n.createElement(u.M,{...q},n.createElement(l.P,null,n.createElement(f.Us,{showFiltersSideBySide:!0,...L}),n.createElement(c.T,{..._},n.createElement(v.n,{idPrefix:"product-table",isTop:!0,paginationProps:z})))),n.createElement(d.X,{...D,"aria-label":"Product table"},n.createElement(h.d,null,n.createElement(m.Tr,null,n.createElement(P.Ze,{...k},n.createElement(p.Th,{...U({columnKey:"name"})}),n.createElement(p.Th,{...U({columnKey:"vendor"})}),n.createElement(p.Th,{...U({columnKey:"versions"})})))),n.createElement(P.nJ,{isLoading:S,isError:!!w,isNoData:0===R,numRenderedColumns:I},N.map(((t,e)=>n.createElement(E.N,{key:t.id,isExpanded:J(t)},n.createElement(m.Tr,{...$({item:t})},n.createElement(P.Oi,{...k,item:t,rowIndex:e},n.createElement(g.Td,{width:30,...j({columnKey:"name"})},n.createElement(s.k2,{to:`/products/${t.id}`},t.name)),n.createElement(g.Td,{width:50,modifier:"truncate",...j({columnKey:"vendor"})},t.vendor?.name),n.createElement(g.Td,{width:20,modifier:"truncate",...j({columnKey:"versions"})},t.versions?.length),n.createElement(g.Td,{isActionCell:!0},n.createElement(y.G,{items:[{title:"Delete",onClick:()=>F.mutate(t.id)}]}))))))))),n.createElement(v.n,{idPrefix:"product-table",isTop:!1,isCompact:!0,paginationProps:z}))))}},4628:(t,e,r)=>{r.d(e,{M3:()=>l,Vh:()=>c,lY:()=>d});var n=r(7616),s=r(26667),i=r(81230),a=r(40752),o=r(77347);const u="products",l=(t={},e=!1)=>{const{data:r,isLoading:s,error:a,refetch:o}=(0,n.I)({queryKey:[u,t],queryFn:()=>(0,i.d$)(t),refetchInterval:!e&&5e3});return{result:{data:r?.data||[],total:r?.total??0,params:r?.params??t},isFetching:s,fetchError:a,refetch:o}},c=t=>{const{data:e,isLoading:r,error:s}=(0,n.I)({queryKey:[u,t],queryFn:()=>(0,i.y9)(t),enabled:void 0!==t});return{product:e,isFetching:r,fetchError:s}},d=(t,e)=>(0,s.n)({mutationFn:async t=>(await(0,a.DD)({client:o.S,path:{id:t}})).data,mutationKey:[u],onSuccess:e,onError:t})},26667:(t,e,r)=>{r.d(e,{n:()=>d});var n=r(63696),s=r(9304),i=r(13403),a=r(47794),o=r(19106),u=class extends a.Q{#t;#e=void 0;#r;#n;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.f8)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.EN)(e.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():"pending"===this.#r?.state.status&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#i(t)}getCurrentResult(){return this.#e}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#i()}mutate(t,e){return this.#n=e,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#s(){const t=this.#r?.state??(0,s.$)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#i(t){i.j.batch((()=>{if(this.#n&&this.hasListeners()){const e=this.#e.variables,r=this.#e.context;"success"===t?.type?(this.#n.onSuccess?.(t.data,e,r),this.#n.onSettled?.(t.data,null,e,r)):"error"===t?.type&&(this.#n.onError?.(t.error,e,r),this.#n.onSettled?.(void 0,t.error,e,r))}this.listeners.forEach((t=>{t(this.#e)}))}))}},l=r(3715),c=r(908);function d(t,e){const r=(0,l.jE)(e),[s]=n.useState((()=>new u(r,t)));n.useEffect((()=>{s.setOptions(t)}),[s,t]);const a=n.useSyncExternalStore(n.useCallback((t=>s.subscribe(i.j.batchCalls(t))),[s]),(()=>s.getCurrentResult()),(()=>s.getCurrentResult())),o=n.useCallback(((t,e)=>{s.mutate(t,e).catch(c.l)}),[s]);if(a.error&&(0,c.G)(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}}}]);
//# sourceMappingURL=168.f558094b.min.js.map