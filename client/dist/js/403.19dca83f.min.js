"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([[403],{891:(e,t,a)=>{a.d(t,{J:()=>b});var l=a(34629),n=a(63696),r=a(42577),o=a(96660),s=a(77635),i=a(85310),c=a(62634),m=a(53025),d=a(99847);const u="--pf-v5-c-label__text--MaxWidth",p={blue:r.A.modifiers.blue,cyan:r.A.modifiers.cyan,green:r.A.modifiers.green,orange:r.A.modifiers.orange,purple:r.A.modifiers.purple,red:r.A.modifiers.red,gold:r.A.modifiers.gold,grey:""},b=e=>{var{children:t,className:a="",color:b="grey",variant:E="filled",isCompact:g=!1,isDisabled:f=!1,isEditable:v=!1,editableProps:h,textMaxWidth:y,tooltipPosition:C,icon:x,onClose:k,onClick:A,onEditCancel:P,onEditComplete:T,closeBtn:w,closeBtnAriaLabel:S,closeBtnProps:_,href:I,isOverflowLabel:L,render:N}=e,O=(0,l.__rest)(e,["children","className","color","variant","isCompact","isDisabled","isEditable","editableProps","textMaxWidth","tooltipPosition","icon","onClose","onClick","onEditCancel","onEditComplete","closeBtn","closeBtnAriaLabel","closeBtnProps","href","isOverflowLabel","render"]);const[R,j]=(0,n.useState)(!1),[$,K]=(0,n.useState)(t),B=n.useRef(),F=n.useRef();n.useEffect((()=>(document.addEventListener("mousedown",D),document.addEventListener("keydown",M),()=>{document.removeEventListener("mousedown",D),document.removeEventListener("keydown",M)}))),n.useEffect((()=>{A&&I?console.warn("Link labels cannot have onClick passed, this results in invalid HTML. Please remove either the href or onClick prop."):A&&v&&console.warn("Editable labels cannot have onClick passed, clicking starts the label edit process. Please remove either the isEditable or onClick prop.")}),[A,I,v]);const D=e=>{R&&F&&F.current&&!F.current.contains(e.target)&&(F.current.value&&T&&T(e,F.current.value),j(!1))},M=e=>{var a,l;const n=e.key;if((R||B&&B.current&&B.current.contains(e.target))&&(!R||F&&F.current&&F.current.contains(e.target))&&(!R||"Enter"!==n&&"Tab"!==n||(e.preventDefault(),e.stopImmediatePropagation(),F.current.value&&T&&T(e,F.current.value),j(!1),null===(a=null==B?void 0:B.current)||void 0===a||a.focus()),R&&"Escape"===n&&(e.preventDefault(),e.stopImmediatePropagation(),F.current.value&&(F.current.value=t,P&&P(e,t)),j(!1),null===(l=null==B?void 0:B.current)||void 0===l||l.focus()),!R&&"Enter"===n)){e.preventDefault(),e.stopImmediatePropagation(),j(!0);const t=e.target,a=document.createRange(),l=window.getSelection();a.selectNodeContents(t),a.collapse(!1),l.removeAllRanges(),l.addRange(a)}},q=(I||A)&&f,G=n.createElement(s.$n,Object.assign({type:"button",variant:"plain",onClick:k,"aria-label":S||`Close ${t}`},q&&{isDisabled:!0},_),n.createElement(m.Ay,null)),U=n.createElement("span",{className:(0,c.A)(r.A.labelActions)},w||G),V=n.createRef(),z=n.useRef(),[J,W]=n.useState(!1);(0,d.E)((()=>{const e=v?B:V;R||W(e.current&&e.current.offsetWidth<e.current.scrollWidth)}),[R]);const H=n.createElement(n.Fragment,null,x&&n.createElement("span",{className:(0,c.A)(r.A.labelIcon)},x),n.createElement("span",Object.assign({ref:V,className:(0,c.A)(r.A.labelText)},y&&{style:{[u]:y}}),t));n.useEffect((()=>{R&&F&&F.current&&F.current.focus()}),[F,R]);let X="span";I?X="a":(v||A&&!L)&&(X="button");const Z={type:"button",onClick:A},Y="button"===X,Q=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({className:(0,c.A)(r.A.labelContent)},J&&{tabIndex:0}),I&&{href:I}),I&&f&&{onClick:e=>e.preventDefault()}),Y&&Z),v&&Object.assign({ref:B,onClick:e=>{j(!0),e.stopPropagation()}},h)),q&&Y&&{disabled:!0}),q&&I&&{tabindex:-1,"aria-disabled":!0});let ee=n.createElement(X,Object.assign({},Q),H);N?ee=n.createElement(n.Fragment,null,J&&n.createElement(i.m,{triggerRef:z,content:t,position:C}),N({className:r.A.labelContent,content:H,componentRef:z})):J&&(ee=n.createElement(i.m,{content:t,position:C},ee));const te=L?"button":"span";return n.createElement(te,Object.assign({},O,{className:(0,c.A)(r.A.label,q&&r.A.modifiers.disabled,p[b],"outline"===E&&r.A.modifiers.outline,L&&r.A.modifiers.overflow,g&&r.A.modifiers.compact,v&&o.A.modifiers.editable,R&&r.A.modifiers.editableActive,a),onClick:L?A:void 0}),!R&&ee,!R&&k&&U,R&&n.createElement("input",Object.assign({className:(0,c.A)(r.A.labelContent),type:"text",id:"editable-input",ref:F,value:$,onChange:()=>{K(F.current.value)}},h)))};b.displayName="Label"},85278:(e,t,a)=>{a.d(t,{x:()=>E});var l=a(63696),n=a(33364),r=a(77635),o=a(38914),s=a(57901),i=a(40360),c=a(23546),m=a(891),d=a(46721),u=a(76072),p=a(97299),b=a(23857);const E=({resourceName:e,value:t,onSave:a,onClose:E})=>{const[g,f]=l.useState(""),[v,h]=l.useState(""),[y,C]=l.useState(Object.entries(t).sort((([e],[t])=>t.localeCompare(e)))),x=()=>{if(!g||!v)return;const e=y.filter((([e])=>e!==g));C([...e,[g,v]]),f(""),h("")};return l.createElement(n.a,{isOpen:!0,variant:n.d.small,title:"Edit labels",onClose:E,actions:[l.createElement(r.$n,{key:"Save",variant:"primary",onClick:()=>{const e=y.reduce(((e,[t,a])=>({...e,[t]:a})),{});a(e)}},"Save"),l.createElement(r.$n,{key:"cancel",variant:"link",onClick:E},"Cancel")],ouiaId:"BasicModal"},l.createElement(o.B,{hasGutter:!0},l.createElement(s.a,null,"Labels help you organize and select resources. Adding labels below will let you query for objects that have similar, overlapping or dissimilar labels."),l.createElement(s.a,null,l.createElement("div",{className:"pf-v5-c-form"},l.createElement(i.g,{label:`Labels for ${e}`},l.createElement(c.o,{className:"pf-v5-c-form-control",style:{padding:10,minHeight:10},defaultIsOpen:!0,numLabels:10},y.map((([e,t],a)=>l.createElement(m.J,{key:a,color:"blue",onClose:()=>{const e=[...y];e.splice(a,1),C(e)}},`${e}=${t}`))))))),l.createElement(s.a,null,l.createElement(d.l,{onSubmit:e=>{x(),e.preventDefault()}},l.createElement(u.x,{hasGutter:!0},l.createElement(p.E,{md:5},l.createElement(i.g,{label:"Key",isRequired:!0,fieldId:"key"},l.createElement(b.ks,{isRequired:!0,type:"text",id:"key",name:"key",value:g,onChange:(e,t)=>f(t)}))),l.createElement(p.E,{md:5},l.createElement(i.g,{label:"Value",isRequired:!0,fieldId:"value"},l.createElement(b.ks,{isRequired:!0,type:"text",id:"value",name:"value",value:v,onChange:(e,t)=>h(t)}))),l.createElement(p.E,{md:2},l.createElement(i.g,{label:"Action"},l.createElement(r.$n,{type:"submit",variant:r.Ak.secondary,onClick:x},"Add"))))))))}},24813:(e,t,a)=>{a.d(t,{A:()=>h});var l=a(1180),n=a(28341),r=a(73401),o=a(64335),s=a(57311),i=a(73220),c=a(99205),m=a(68986),d=a(33364),u=a(94279),p=a(16172),b=a(63696),E=a(56279),g=a(84608),f=a(341),v=a(77307);const h=({isExpanded:e,uploads:t,onCloseClick:a,handleUpload:h,handleRemoveUpload:y,extractSuccessMessage:C,extractErrorMessage:x})=>{const[k,A]=b.useState(!1),[P,T]=b.useState("inProgress"),[w,S]=b.useState([]);!k&&t.size>0&&A(!0),b.useEffect((()=>{const e=Array.from(t.values());e.some((e=>"inProgress"===e.status))?T("inProgress"):e.every((e=>"complete"===e.status))?T("success"):T("danger")}),[t]);const _=Array.from(t.values()).filter((e=>e.response)).length;return b.createElement(v.q,{isExpanded:e,onCloseClick:a,pageKey:"upload-files",drawerPanelContentProps:{defaultSize:"600px"},header:b.createElement(l.n,null,b.createElement(n.h,{headingLevel:"h2",size:"lg",className:f.A.mtXs},"Upload files"))},b.createElement(r.w,{onFileDrop:(e,t)=>{h(t)},dropzoneProps:{accept:{"application/xml":[".json"]},onDropRejected:e=>{S(e)}},isHorizontal:!0},b.createElement(o.x,{titleIcon:b.createElement(g.Ay,null),titleText:"Drag and drop files here",titleTextSeparator:"or",infoText:"Accepted file types: JSON"}),k&&b.createElement(s.y,{statusToggleText:`${_} of ${t.size} files uploaded`,statusToggleIcon:P},Array.from(t.entries()).map((([e,t],a)=>b.createElement(i.L,{fileIcon:b.createElement(E.Ay,null),file:e,key:`${e.name}-${a}`,onClearClick:()=>{[e].forEach((e=>{y(e)}))},progressValue:t.progress,progressVariant:t.error?"danger":t.response?"success":void 0,progressHelperText:t.error?b.createElement(c.E,{isLiveRegion:!0},b.createElement(m.j,{variant:"error"},x(t.error))):t.response?b.createElement(c.E,{isLiveRegion:!0},b.createElement(m.j,{variant:"default"},C(t.response))):void 0})))),b.createElement(d.a,{isOpen:w.length>0,title:"Unsupported files",titleIconVariant:"warning",showClose:!0,"aria-label":"unsupported file upload attempted",onClose:()=>S([]),variant:"small"},b.createElement(u.B8,null,w.map(((e,t)=>b.createElement(p.c,{key:t},e.file.name)))))))}},23713:(e,t,a)=>{a.d(t,{m:()=>r});var l=a(81230),n=a(22249);const r=()=>({downloadAdvisory:(e,t)=>{(0,l.yZ)(e).then((a=>{(0,n.saveAs)(new Blob([a.data]),t||`${e}.json`)}))},downloadCVE:(e,t)=>{(0,l.J8)(e).then((a=>{(0,n.saveAs)(new Blob([a.data]),t||`${e}.json`)}))},downloadSBOM:(e,t)=>{(0,l.Ix)(e).then((a=>{(0,n.saveAs)(new Blob([a.data]),t||`${e}.json`)}))}})},50727:(e,t,a)=>{a.r(t),a.d(t,{default:()=>M});var l=a(63696),n=a(49348),r=a(68430),o=a(1180),s=a(72785),i=a(20653),c=a(35048),m=a(4433),d=a(77635),u=a(65753),p=a(24974),b=a(21639),E=a(3939),g=a(94279),f=a(16172),v=a(85578),h=a(16646),y=a(31065),C=a(77819),x=a(28516),k=a(3629),A=a(62101),P=a(38139),T=a(86820),w=a(85278),S=a(33273),_=a(67837),I=a(50705),L=a(17993);const N=({sbomId:e})=>{const{result:{total:t}}=(0,L.sl)(e,{page:{pageNumber:1,itemsPerPage:1}});return l.createElement(l.Fragment,null,t)};var O=a(1349),R=a(62520),j=a(24813),$=a(70611),K=a(23713),B=a(5098),F=a(22671),D=a(34066);const M=()=>{const{pushNotification:e}=l.useContext(I.K),[t,a]=l.useState(!1),{uploads:L,handleUpload:M,handleRemoveUpload:G}=(0,F.sn)(),[U,V]=l.useState(null),[z,J]=l.useState(null),{mutate:W}=(0,F.cF)((()=>{}),(t=>{e({title:"Error while updating labels",variant:"danger"})})),H=(0,$.MM)({tableName:"sboms",persistenceKeyPrefix:T.rt.sboms,columnNames:{name:"Name",published:"Published",labels:"Labels",packages:"Packages"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["published"],isFilterEnabled:!0,filterCategories:[{categoryKey:"",title:"Filter text",placeholderText:"Search",type:S.RJ.search}],isExpansionEnabled:!0,expandableVariant:"compound"}),{result:{data:X,total:Z},isFetching:Y,fetchError:Q}=(0,F.i$)((0,$.Ng)({...H,hubSortFieldKeys:{published:"published"}})),ee=(0,$.PB)({...H,idProperty:"id",currentPageItems:X,totalItemCount:Z,isLoading:Y,selectionState:(0,B.$)({items:X,isEqual:(e,t)=>e.id===t.id})}),{numRenderedColumns:te,currentPageItems:ae,propHelpers:{toolbarProps:le,filterToolbarProps:ne,paginationToolbarItemProps:re,paginationProps:oe,tableProps:se,getThProps:ie,getTrProps:ce,getTdProps:me},expansionDerivedState:{isCellExpanded:de}}=ee,{downloadSBOM:ue}=(0,K.m)();return l.createElement(l.Fragment,null,l.createElement(r.d8,{variant:r.zC.light},l.createElement(o.n,null,l.createElement(s.E,{component:"h1"},"SBOMs"))),l.createElement(r.d8,null,l.createElement("div",{style:{backgroundColor:"var(--pf-v5-global--BackgroundColor--100)"}},l.createElement(i.M,{...le},l.createElement(c.P,null,l.createElement(S.Us,{showFiltersSideBySide:!0,...ne}),l.createElement(m.T,null,l.createElement(d.$n,{type:"button",id:"upload","aria-label":"Upload",variant:"secondary",onClick:()=>a(!0)},"Upload")),l.createElement(m.T,{...re},l.createElement(O.n,{idPrefix:"sboms-table",isTop:!0,paginationProps:oe})))),l.createElement(v.X,{...se,"aria-label":"SBOM table"},l.createElement(h.d,null,l.createElement(y.Tr,null,l.createElement(R.Ze,{...ee},l.createElement(C.Th,{...ie({columnKey:"name"})}),l.createElement(C.Th,{...ie({columnKey:"published"})}),l.createElement(C.Th,{...ie({columnKey:"labels"})}),l.createElement(C.Th,{...ie({columnKey:"packages"})})))),l.createElement(R.nJ,{isLoading:Y,isError:!!Q,isNoData:0===Z,numRenderedColumns:te},ae.map(((e,t)=>l.createElement(x.N,{key:e.id,isExpanded:de(e)},l.createElement(y.Tr,{...ce({item:e})},l.createElement(R.Oi,{...ee,item:e,rowIndex:t},l.createElement(k.Td,{width:40,...me({columnKey:"name",isCompoundExpandToggle:!0,item:e,rowIndex:t})},l.createElement(n.k2,{to:`/sboms/${e.id}`},e.name)),l.createElement(k.Td,{width:10,modifier:"truncate",...me({columnKey:"published"})},(0,D.Yq)(e.published)),l.createElement(k.Td,{width:25,modifier:"truncate",...me({columnKey:"labels"})},e.labels&&l.createElement(_.g,{value:e.labels})),l.createElement(k.Td,{width:10,...me({columnKey:"packages"})},l.createElement(N,{sbomId:e.id})),l.createElement(k.Td,{isActionCell:!0},l.createElement(A.G,{items:[{title:"Edit labels",onClick:()=>{var t;t=e,V("editLabels"),J(t)}},{title:"Download",onClick:()=>{ue(e.id,`${e.name}.json`)}}]})))),de(e)?l.createElement(y.Tr,{isExpanded:!0},l.createElement(k.Td,{colSpan:7},l.createElement(P.g,null,l.createElement("div",{className:"pf-v5-u-m-md"},de(e,"name")?l.createElement(l.Fragment,null,l.createElement(u.B,null,l.createElement(p.W,null,l.createElement(b.X,null,"Author"),l.createElement(E.d,null,l.createElement(g.B8,null,e.authors.map(((e,t)=>l.createElement(f.c,{key:t},e)))))),l.createElement(p.W,null,l.createElement(b.X,null,"Described by"),l.createElement(E.d,null,e.described_by&&l.createElement(q,{described_by:e.described_by}))))):null)))):null))))),l.createElement(O.n,{idPrefix:"sboms-apps-table",isTop:!1,isCompact:!0,paginationProps:oe}))),l.createElement(j.A,{isExpanded:t,uploads:L,handleUpload:M,handleRemoveUpload:G,extractSuccessMessage:e=>`${e.data.document_id} uploaded`,extractErrorMessage:e=>e.response?.data?e.message:"Error while uploading file",onCloseClick:()=>a(!1)}),"editLabels"===U&&z&&l.createElement(w.x,{resourceName:z.name,value:z.labels??{},onSave:e=>{((e,t)=>{W({...e,labels:t})})(z,e),J(null),V(null)},onClose:()=>V(null)}))},q=({described_by:e})=>{const t=(0,$.vY)({variant:"compact",tableName:"version-table",idProperty:"name",items:e,columnNames:{name:"Name",version:"Version"},isPaginationEnabled:!1,isSortEnabled:!0,sortableColumns:[],isFilterEnabled:!0,filterCategories:[{categoryKey:"",title:"Filter tex",type:S.RJ.search,placeholderText:"Search...",getItemValue:e=>e.name}],isExpansionEnabled:!1}),{currentPageItems:a,numRenderedColumns:n,propHelpers:{tableProps:r,getThProps:o,getTrProps:s,getTdProps:i}}=t;return l.createElement(l.Fragment,null,l.createElement(v.X,{...r,"aria-label":"Version table"},l.createElement(h.d,null,l.createElement(y.Tr,null,l.createElement(R.Ze,{...t},l.createElement(C.Th,{...o({columnKey:"name"})}),l.createElement(C.Th,{...o({columnKey:"version"})})))),l.createElement(R.nJ,{isLoading:!1,isError:void 0,isNoData:0===e?.length,numRenderedColumns:n},a?.map(((e,a)=>l.createElement(x.N,{key:e.name},l.createElement(y.Tr,{...s({item:e})},l.createElement(R.Oi,{...t,item:e,rowIndex:a},l.createElement(k.Td,{width:20,modifier:"truncate",...i({columnKey:"name"})},e.name),l.createElement(k.Td,{width:15,modifier:"truncate",...i({columnKey:"version"})},e.version)))))))))}},17993:(e,t,a)=>{a.d(t,{Lx:()=>o,Si:()=>s,sl:()=>i});var l=a(7616),n=a(81230);const r="packages",o=(e={},t=!1)=>{const{data:a,isLoading:o,error:s,refetch:i}=(0,l.I)({queryKey:[r,e],queryFn:()=>(0,n.G9)(e),refetchInterval:!t&&5e3});return{result:{data:a?.data||[],total:a?.total??0,params:a?.params??e},isFetching:o,fetchError:s,refetch:i}},s=e=>{const{data:t,isLoading:a,error:o}=(0,l.I)({queryKey:[r,e],queryFn:()=>void 0===e?Promise.resolve(void 0):(0,n.$f)(e)});return{pkg:t,isFetching:a,fetchError:o}},i=(e,t={})=>{const{data:a,isLoading:o,error:s,refetch:i}=(0,l.I)({queryKey:[r,"by-sbom",e,t],queryFn:()=>(0,n.$u)(e,t)});return{result:{data:a?.data||[],total:a?.total??0,params:a?.params??t},isFetching:o,fetchError:s,refetch:i}}},96660:(e,t,a)=>{a.d(t,{A:()=>l});const l={button:"pf-v5-c-button",labelGroup:"pf-v5-c-label-group",labelGroupClose:"pf-v5-c-label-group__close",labelGroupLabel:"pf-v5-c-label-group__label",labelGroupList:"pf-v5-c-label-group__list",labelGroupListItem:"pf-v5-c-label-group__list-item",labelGroupMain:"pf-v5-c-label-group__main",labelGroupTextarea:"pf-v5-c-label-group__textarea",modifiers:{category:"pf-m-category",vertical:"pf-m-vertical",editable:"pf-m-editable",textarea:"pf-m-textarea"}}},42577:(e,t,a)=>{a.d(t,{A:()=>l});const l={button:"pf-v5-c-button",label:"pf-v5-c-label",labelActions:"pf-v5-c-label__actions",labelContent:"pf-v5-c-label__content",labelIcon:"pf-v5-c-label__icon",labelText:"pf-v5-c-label__text",modifiers:{compact:"pf-m-compact",blue:"pf-m-blue",green:"pf-m-green",orange:"pf-m-orange",red:"pf-m-red",purple:"pf-m-purple",cyan:"pf-m-cyan",gold:"pf-m-gold",outline:"pf-m-outline",overflow:"pf-m-overflow",add:"pf-m-add",editable:"pf-m-editable",editableActive:"pf-m-editable-active",disabled:"pf-m-disabled"},themeDark:"pf-v5-theme-dark"}}}]);
//# sourceMappingURL=403.19dca83f.min.js.map