"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([["503"],{32804:function(e,t,s){s.r(t),s.d(t,{default:()=>d});var r=s(62540),i=s(74343),n=s(68430),l=s(98261),a=s(75530),u=s(42957),o=s(58625),h=s(30111),c=s(52362);let d=()=>{let{uploads:e,handleUpload:t,handleRemoveUpload:s}=(0,h.sn)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.d8,{type:"breadcrumb",children:(0,r.jsxs)(l.Q,{children:[(0,r.jsx)(a.J,{children:(0,r.jsx)(i.N_,{to:c.Jh.sboms,children:"SBOMs"})}),(0,r.jsx)(a.J,{isActive:!0,children:"Upload SBOM"})]})}),(0,r.jsx)(n.d8,{children:(0,r.jsxs)(u.U,{children:[(0,r.jsx)(u.U,{component:"h1",children:"Upload SBOM"}),(0,r.jsx)(u.U,{component:"p",children:"Upload a Software Bill of Materials (SBOM) document. We accept CycloneDX versions 1.3, 1.4, 1.5 and 1.6, and System Package Data Exchange (SPDX) versions 2.2, and 2.3."})]})}),(0,r.jsx)(n.d8,{children:(0,r.jsx)(o.h,{uploads:e,handleUpload:t,handleRemoveUpload:s,extractSuccessMessage:e=>"".concat(e.data.document_id," uploaded"),extractErrorMessage:e=>{var t;return(null==(t=e.response)?void 0:t.data)?e.message:"Error while uploading file"}})})]})}},30111:function(e,t,s){s.d(t,{DH:()=>j,Qr:()=>R,_P:()=>f,bj:()=>w,cF:()=>S,i$:()=>m,l6:()=>E,rj:()=>g,sn:()=>q,zY:()=>O});var r=s(32909),i=s(42642),n=s(72610),l=s(77184),a=s(59722),u=s(62603),o=s(90130),h=s(3822),c=s(96002),d=s(86141),b=s(93531),y=s(81895),p=s(73470);let v="sboms",f=e=>{let{data:t,isLoading:s,error:r,refetch:i}=(0,l.I)({queryKey:[v,"labels",e],queryFn:()=>(0,d.Dw)({client:c.S,query:{limit:10,filter_text:e}}),placeholderData:a.rX});return{labels:(null==t?void 0:t.data)||[],isFetching:s,fetchError:r,refetch:i}},m=function(){var e,t,s;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],h=(0,p.kd)(a),{q:b}=h,y=(0,n._)(h,["q"]),f=(0,p.Er)(u),{data:m,isLoading:g,error:E,refetch:q}=(0,l.I)({queryKey:[v,a,f],queryFn:()=>(0,d.z1)({client:c.S,query:(0,i._)((0,r._)({},y),{q:[b,f].filter(e=>e).join("&")})}),enabled:!o});return{result:{data:(null==m||null==(e=m.data)?void 0:e.items)||[],total:null!=(s=null==m||null==(t=m.data)?void 0:t.total)?s:0,params:a},isFetching:g,fetchError:E,refetch:q}},g=(e,t,s)=>{let{data:r,isLoading:i,error:n}=(0,l.I)({queryKey:[v,e],queryFn:()=>void 0===e?Promise.resolve(void 0):(0,d.a7)({client:c.S,path:{id:e}}),enabled:!!e,refetchInterval:t,retry:s});return{sbom:null==r?void 0:r.data,isFetching:i,fetchError:n}},E=(e,t)=>{let s=(0,u.jE)();return(0,o.n)({mutationFn:async e=>(await (0,d.bS)({client:c.S,path:{id:e}})).data,onSuccess:async(t,r)=>{e(t,r),await s.invalidateQueries({queryKey:[v]}),s.removeQueries({queryKey:[v,r]})},onError:async e=>{t(e),await s.invalidateQueries({queryKey:[v]})}})},q=()=>{let e=(0,u.jE)();return(0,b.v)({parallel:!0,uploadFn:(e,t)=>(0,y.J4)(e,t),onSuccess:async()=>{await e.invalidateQueries({queryKey:[v]})}})},S=(e,t)=>{let s=(0,u.jE)();return(0,o.n)({mutationFn:e=>(0,d.aB)({client:c.S,path:{id:e.id},body:e.labels}),onSuccess:async()=>{e(),await s.invalidateQueries({queryKey:[v]})},onError:t})},R=function(e){var t,s,i;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:a,isLoading:u,error:o,refetch:h}=(0,l.I)({queryKey:[v,"by-package",e,n],queryFn:()=>(0,d.m9)({client:c.S,query:(0,r._)({purl:e},(0,p.kd)(n))})});return{result:{data:(null==a||null==(t=a.data)?void 0:t.items)||[],total:null!=(i=null==a||null==(s=a.data)?void 0:s.total)?i:0,params:n},isFetching:u,fetchError:o,refetch:h}},j=e=>{let{data:t,isLoading:s,error:r}=(0,l.I)({queryKey:[v,e,"advisory"],queryFn:()=>(0,d.bj)({client:c.S,path:{id:e}})});return{advisories:(null==t?void 0:t.data)||[],isFetching:s,fetchError:r}},O=e=>{let t=(0,h.E)({queries:e.map(e=>({queryKey:[v,e,"advisory"],queryFn:()=>(0,d.bj)({client:c.S,path:{id:e}})}))});return{advisories:t.map(e=>{let{data:t}=e;return(null==t?void 0:t.data)||[]}),isFetching:t.some(e=>{let{isLoading:t}=e;return t}),fetchError:t.map(e=>{let{error:t}=e;return t})}},w=e=>{let{data:t,isLoading:s,error:r}=(0,l.I)({queryKey:[v,e,"license-ids"],queryFn:()=>(0,d.ZV)({client:c.S,path:{id:e}})});return{licenseIds:(null==t?void 0:t.data)||[],isFetching:s,fetchError:r}}},3822:function(e,t,s){s.d(t,{E:()=>p});var r=s(63696),i=s(72739),n=s(97221),l=s(42122),a=s(59722);function u(e,t){let s=new Set(t);return e.filter(e=>!s.has(e))}var o=class extends l.Q{#e;#t;#s;#r;#i;#n;#l;#a;#u=[];constructor(e,t,s){super(),this.#e=e,this.#r=s,this.#s=[],this.#i=[],this.#t=[],this.setQueries(t)}onSubscribe(){1===this.listeners.size&&this.#i.forEach(e=>{e.subscribe(t=>{this.#o(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#i.forEach(e=>{e.destroy()})}setQueries(e,t){this.#s=e,this.#r=t,i.jG.batch(()=>{let e=this.#i,t=this.#h(this.#s);this.#u=t,t.forEach(e=>e.observer.setOptions(e.defaultedQueryOptions));let s=t.map(e=>e.observer),r=s.map(e=>e.getCurrentResult()),i=s.some((t,s)=>t!==e[s]);e.length===s.length&&!i||(this.#i=s,this.#t=r,this.hasListeners()&&(u(e,s).forEach(e=>{e.destroy()}),u(s,e).forEach(e=>{e.subscribe(t=>{this.#o(e,t)})}),this.#c()))})}getCurrentResult(){return this.#t}getQueries(){return this.#i.map(e=>e.getCurrentQuery())}getObservers(){return this.#i}getOptimisticResult(e,t){let s=this.#h(e),r=s.map(e=>e.observer.getOptimisticResult(e.defaultedQueryOptions));return[r,e=>this.#d(e??r,t),()=>this.#b(r,s)]}#b(e,t){return t.map((s,r)=>{let i=e[r];return s.defaultedQueryOptions.notifyOnChangeProps?i:s.observer.trackResult(i,e=>{t.forEach(t=>{t.observer.trackProp(e)})})})}#d(e,t){return t?(this.#n&&this.#t===this.#a&&t===this.#l||(this.#l=t,this.#a=this.#t,this.#n=(0,a.BH)(this.#n,t(e))),this.#n):e}#h(e){let t=new Map(this.#i.map(e=>[e.options.queryHash,e])),s=[];return e.forEach(e=>{let r=this.#e.defaultQueryOptions(e),i=t.get(r.queryHash);i?s.push({defaultedQueryOptions:r,observer:i}):s.push({defaultedQueryOptions:r,observer:new n.$(this.#e,r)})}),s}#o(e,t){let s=this.#i.indexOf(e);if(-1!==s){var r;let e;this.#t=(r=this.#t,(e=r.slice(0))[s]=t,e),this.#c()}}#c(){if(this.hasListeners()){let e=this.#n,t=this.#b(this.#t,this.#u);e!==this.#d(t,this.#r?.combine)&&i.jG.batch(()=>{this.listeners.forEach(e=>{e(this.#t)})})}}},h=s(62603),c=s(57321),d=s(15818),b=s(81796),y=s(39481);function p({queries:e,...t},s){let l=(0,h.jE)(s),u=(0,c.w)(),p=(0,d.h)(),v=r.useMemo(()=>e.map(e=>{let t=l.defaultQueryOptions(e);return t._optimisticResults=u?"isRestoring":"optimistic",t}),[e,l,u]);v.forEach(e=>{(0,y.jv)(e),(0,b.LJ)(e,p)}),(0,b.wZ)(p);let[f]=r.useState(()=>new o(l,v,t)),[m,g,E]=f.getOptimisticResult(v,t.combine),q=!u&&!1!==t.subscribed;r.useSyncExternalStore(r.useCallback(e=>q?f.subscribe(i.jG.batchCalls(e)):a.lQ,[f,q]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),r.useEffect(()=>{f.setQueries(v,t)},[v,t,f]);let S=m.some((e,t)=>(0,y.EU)(v[t],e))?m.flatMap((e,t)=>{let s=v[t];if(s){let t=new n.$(l,s);if((0,y.EU)(s,e))return(0,y.iL)(s,t,p);(0,y.nE)(e,u)&&(0,y.iL)(s,t,p)}return[]}):[];if(S.length>0)throw Promise.all(S);let R=m.find((e,t)=>{let s=v[t];return s&&(0,b.$1)({result:e,errorResetBoundary:p,throwOnError:s.throwOnError,query:l.getQueryCache().get(s.queryHash),suspense:s.suspense})});if(R?.error)throw R.error;return g(E())}}}]);