"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([["551"],{27889:function(e,i,t){t.d(i,{R:()=>c,r:()=>m});var l=t(32909),n=t(42642),r=t(62540),s=t(63696),a=t(98259),d=t(71284);t(21999);var o=t(73470),u=t(99134);let c=s.createContext({}),m=e=>{var i;let{children:t}=e,[m,x]=s.useState(""),[h,y]=s.useState("");s.useEffect(()=>{let e=setTimeout(()=>{y(m)},400);return()=>clearTimeout(e)},[m]);let{labels:p}=(0,u.eq)(h),_=(0,o.MM)({tableName:"advisory",persistenceKeyPrefix:a.rt.advisories,persistTo:"urlParams",columnNames:{identifier:"ID",title:"Title",type:"Type",labels:"Labels",modified:"Revision",vulnerabilities:"Vulnerabilities"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["identifier","modified"],initialSort:{columnKey:"modified",direction:"desc"},isFilterEnabled:!0,filterCategories:[{categoryKey:a._G,title:"Filter text",placeholderText:"Search",type:"search"},{categoryKey:"modified",title:"Revision",type:"dateRange"},{categoryKey:"labels",title:"Label",type:"autocompleteLabel",placeholderText:"Filter results by label",selectOptions:p.map(e=>{let i=(0,d.m4)({key:e.key,value:e.value});return{value:i,label:i}}),onInputValueChange:x}],isExpansionEnabled:!1}),{result:{data:b,total:f},isFetching:v,fetchError:j}=(0,u.VH)((0,o.Ng)((0,n._)((0,l._)({},_),{hubSortFieldKeys:{identifier:"document_id",modified:"modified"}})),(null!=(i=_.filterState.filterValues.labels)?i:[]).map(e=>(0,d.Cb)(e))),T=(0,o.PB)((0,n._)((0,l._)({},_),{idProperty:"identifier",currentPageItems:b,totalItemCount:f,isLoading:v}));return(0,r.jsx)(c.Provider,{value:{totalItemCount:f,isFetching:v,fetchError:j,tableControls:T},children:t})}},41484:function(e,i,t){t.d(i,{q:()=>I});var l=t(32909),n=t(42642),r=t(62540),s=t(63696),a=t(74343),d=t(38927),o=t(80057),u=t(13021),c=t(24773),m=t(26917),x=t(16646),h=t(21758),y=t(40384),p=t(28516),_=t(78517),b=t(62101),f=t(71284),v=t(27875),j=t(89705),T=t(12852),g=t(4392),C=t(93826),K=t(30448),w=t(15461),k=t(99528),S=t(99134),E=t(67458),P=t(23909),L=t(27889),A=t(40665),D=t(98259);let I=()=>{let{pushNotification:e}=s.useContext(g.K),{isFetching:i,fetchError:t,totalItemCount:I,tableControls:R}=s.useContext(L.R),[F,V]=s.useState(null),N=null!==F,{numRenderedColumns:q,currentPageItems:B,propHelpers:{paginationProps:J,tableProps:O,getThProps:U,getTrProps:H,getTdProps:M},expansionDerivedState:{isCellExpanded:G},filterState:{filterValues:W,setFilterValues:Z}}=R,{downloadAdvisory:X}=(0,k.m)(),Y=()=>{V(null)},[$,z]=s.useState(null),{mutate:Q,isPending:ee}=(0,S.ni)(i=>{z(null),e({title:"The Advisory ".concat(i.identifier," was deleted"),variant:"success"})},i=>{e({title:"Error occurred while deleting the Advisory",variant:"danger"})});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.X,(0,n._)((0,l._)({},O),{"aria-label":"advisory-table",children:[(0,r.jsx)(x.d,{children:(0,r.jsx)(h.Tr,{children:(0,r.jsxs)(K.Ze,(0,n._)((0,l._)({},R),{children:[(0,r.jsx)(y.Th,(0,l._)({},U({columnKey:"identifier"}))),(0,r.jsx)(y.Th,(0,l._)({},U({columnKey:"title"}))),(0,r.jsx)(y.Th,(0,l._)({},U({columnKey:"type"}))),(0,r.jsx)(y.Th,(0,l._)({},U({columnKey:"labels"}))),(0,r.jsx)(y.Th,(0,l._)({},U({columnKey:"modified"}))),(0,r.jsx)(y.Th,(0,l._)({},U({columnKey:"vulnerabilities"})))]}))})}),(0,r.jsx)(K.nJ,{isLoading:i,isError:!!t,isNoData:0===I,numRenderedColumns:q,children:B.map((e,i)=>{let t=e.vulnerabilities.reduce((e,i)=>{let t=(0,v.U)(i.severity);return e[t]=e[t]+1,e},{critical:0,high:0,medium:0,low:0,none:0,unknown:0});return(0,r.jsx)(p.N,{isExpanded:G(e),children:(0,r.jsx)(h.Tr,(0,n._)((0,l._)({},H({item:e})),{children:(0,r.jsxs)(K.Oi,(0,n._)((0,l._)({},R),{item:e,rowIndex:i,children:[(0,r.jsx)(_.Td,(0,n._)((0,l._)({width:15,modifier:"breakWord"},M({columnKey:"identifier",isCompoundExpandToggle:!0,item:e,rowIndex:i})),{children:(0,r.jsx)(a.k2,{to:(0,a.tW)(E.Jh.advisoryDetails,{advisoryId:e.uuid}),children:e.document_id})})),(0,r.jsx)(_.Td,(0,n._)((0,l._)({width:35,modifier:"truncate"},M({columnKey:"title"})),{children:e.title})),(0,r.jsx)(_.Td,(0,n._)((0,l._)({width:10},M({columnKey:"type"})),{children:e.labels.type})),(0,r.jsx)(_.Td,(0,n._)((0,l._)({width:20},M({columnKey:"labels"})),{children:(0,r.jsx)(T.g,{value:e.labels,onClick:e=>{let{key:i,value:t}=e,r=(0,f.m4)({key:i,value:t}),s=W.labels;if(!(null==s?void 0:s.includes(r))){let e=s?[...s,r]:[r];Z((0,n._)((0,l._)({},W),{labels:e}))}}})})),(0,r.jsx)(_.Td,(0,n._)((0,l._)({width:10,modifier:"truncate"},M({columnKey:"modified"})),{children:(0,P.Yq)(e.modified)})),(0,r.jsx)(_.Td,(0,n._)((0,l._)({width:10},M({columnKey:"vulnerabilities"})),{children:(0,r.jsx)(w.n,{severities:t})})),(0,r.jsx)(_.Td,{isActionCell:!0,children:(0,r.jsx)(b.G,{items:[{title:"Edit labels",onClick:()=>{V(e)}},{title:"Download",onClick:()=>{X(e.uuid,"".concat(e.identifier,".json"))}},{isSeparator:!0},{title:"Delete",onClick:()=>{z(e)}}]})})]}))}))},e.identifier)})})]})),(0,r.jsx)(C.n,{idPrefix:"advisory-table",isTop:!1,paginationProps:J}),(0,r.jsxs)(d.a,{isOpen:N,variant:"medium",onClose:Y,children:[(0,r.jsx)(o.r,{title:"Edit labels"}),(0,r.jsx)(u.c,{children:F&&(0,r.jsx)(A.t,{advisory:F,onClose:Y})})]}),(0,r.jsx)(j.T,(0,n._)((0,l._)({},(0,D.p6)($)),{inProgress:ee,titleIconVariant:"warning",isOpen:!!$,confirmBtnVariant:c.Ak.danger,confirmBtnLabel:"Delete",cancelBtnLabel:"Cancel",onCancel:()=>z(null),onClose:()=>z(null),onConfirm:()=>{$&&Q($.uuid)}}))]})}},5193:function(e,i,t){t.d(i,{F:()=>p});var l=t(32909),n=t(42642),r=t(62540),s=t(63696),a=t(74343),d=t(61360),o=t(35048),u=t(32490),c=t(24773),m=t(21999),x=t(93826),h=t(67458),y=t(27889);let p=e=>{let{showFilters:i,showActions:t}=e,p=(0,a.Zp)(),{tableControls:_}=s.useContext(y.R),{propHelpers:{toolbarProps:b,filterToolbarProps:f,paginationToolbarItemProps:v,paginationProps:j}}=_;return(0,r.jsx)(d.M,(0,n._)((0,l._)({},b),{"aria-label":"advisory-toolbar",children:(0,r.jsxs)(o.P,{children:[i&&(0,r.jsx)(m.Us,(0,l._)({},f)),t&&(0,r.jsx)(u.T,{children:(0,r.jsx)(c.$n,{variant:"primary",onClick:()=>p(h.Jh.advisoryUpload),children:"Upload Advisory"})}),(0,r.jsx)(u.T,(0,n._)((0,l._)({},v),{children:(0,r.jsx)(x.n,{idPrefix:"advisory-table",isTop:!0,paginationProps:j})}))]})}))}},40665:function(e,i,t){t.d(i,{t:()=>d});var l=t(62540),n=t(63696),r=t(91242),s=t(4392),a=t(99134);let d=e=>{let{advisory:i,onClose:t}=e,{pushNotification:d}=n.useContext(s.K),[o,u]=n.useState(""),[c,m]=n.useState(""),{labels:x}=(0,a.eq)(c);n.useEffect(()=>{let e=setTimeout(()=>{m(o)},400);return()=>clearTimeout(e)},[o]);let{mutate:h,isPending:y}=(0,a.uJ)(()=>{d({title:"Labels updated for Advisory ".concat(i.document_id),variant:"success"}),t()},e=>{d({title:"Error while updating labels for Advisory ".concat(i.document_id),variant:"danger"})});return(0,l.jsx)(r.e,{title:"Labels of Advisory: ".concat(i.document_id),value:i.labels,isDisabled:y,onSave:e=>{h({id:i.uuid,labels:e})},onClose:t,onInputChange:u,options:x})}}}]);