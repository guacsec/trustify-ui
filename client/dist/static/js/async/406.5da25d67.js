"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([["406"],{81895:function(e,a,s){s.d(a,{J4:()=>u,SP:()=>h,Z3:()=>g,hP:()=>c});var l=s(32909),t=s(42642),r=s(46165),o=s(98259);s(56161);let n="/api",i="".concat(n,"/v2/advisory"),p="".concat(n,"/v2/sbom"),d=e=>{let a="application/json";return e.name.endsWith(".bz2")&&(a="application/json+bzip2"),a},c=(e,a)=>{let s=e.get(o.fs);return r.A.post("".concat(i),s,(0,t._)((0,l._)({},a),{headers:{"Content-Type":d(s)}}))},u=(e,a)=>{let s=e.get(o.fs);return r.A.post("".concat(p),s,(0,t._)((0,l._)({},a),{headers:{"Content-Type":d(s)}}))},h=(e,a)=>{let s=e.get(o.fs);return r.A.post("/api/v2/ui/extract-sbom-purls",s,(0,t._)((0,l._)({},a),{headers:{"Content-Type":d(s)}}))},g=e=>r.A.get("".concat(p,"/").concat(e,"/license-export"),{responseType:"arraybuffer",headers:{Accept:"text/plain",responseType:"blob"}})},58625:function(e,a,s){s.d(a,{h:()=>N});var l=s(62540),t=s(63696),r=s(72775),o=s(56129),n=s(97517),i=s(12799),p=s(62634),d=s(50501),c=s(40066),u=s(55092),h=s(93302),g=s(84632);let f=e=>{var{children:a,className:s,statusToggleText:r,statusToggleIcon:o,"aria-label":f}=e,m=(0,n.__rest)(e,["children","className","statusToggleText","statusToggleIcon","aria-label"]);let[v,x]=(0,t.useState)(),[y,j]=(0,t.useState)(!0);(0,t.useEffect)(()=>{switch(o){case"danger":x((0,l.jsx)(g.Ay,{}));break;case"success":x((0,l.jsx)(h.Ay,{}));break;case"inProgress":x((0,l.jsx)(u.Ay,{}));break;default:x(o)}},[o]);let A=(0,l.jsxs)("div",{className:i.A.multipleFileUploadStatusProgress,children:[(0,l.jsx)("div",{className:`${i.A.multipleFileUploadStatusProgress}-icon`,children:v}),(0,l.jsx)("div",{className:`${i.A.multipleFileUploadStatusProgress}-text`,children:r})]}),F=()=>{j(!y)};return(0,l.jsx)("div",Object.assign({className:(0,p.A)(i.A.multipleFileUploadStatus,s)},m,{children:(0,l.jsx)(c.N,{prefix:"pf-expandable-section-",children:e=>(0,l.jsx)(d.Q,{contentId:`${e}-content`,toggleId:`${e}-toggle`,toggleContent:A,isExpanded:y,onToggle:F,children:(0,l.jsx)("ul",{className:`${i.A.multipleFileUploadStatus}-list`,role:"list","aria-label":f,children:a})})})}))};f.displayName="MultipleFileUploadStatus";var m=s(90929),v=s(24773),x=s(32791);let y=(0,x.w)({name:"FileIcon",height:512,width:384,svgPath:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z",yOffset:0,xOffset:0,svgClassName:void 0});var j=s(53025);let A=e=>{var{className:a,file:s,fileIcon:r,onReadStarted:o=()=>{},onReadFinished:d=()=>{},onReadSuccess:c=()=>{},onReadFail:u=()=>{},onClearClick:h=()=>{},customFileHandler:g,fileName:f,fileSize:x,progressValue:A,progressVariant:F,progressAriaLabel:_,progressAriaLabelledBy:b,progressId:U,progressAriaLiveMessage:S,buttonAriaLabel:w="Remove from list",progressHelperText:C}=e,P=(0,n.__rest)(e,["className","file","fileIcon","onReadStarted","onReadFinished","onReadSuccess","onReadFail","onClearClick","customFileHandler","fileName","fileSize","progressValue","progressVariant","progressAriaLabel","progressAriaLabelledBy","progressId","progressAriaLiveMessage","buttonAriaLabel","progressHelperText"]);let[T,I]=(0,t.useState)(0),[N,M]=(0,t.useState)();(0,t.useEffect)(()=>{if(g)g(s);else o(s),new Promise((e,a)=>{let l=new FileReader;l.onload=()=>e(l.result),l.onerror=()=>a(l.error),l.onprogress=e=>{e.lengthComputable&&I(e.loaded/e.total*100)},l.readAsDataURL(s)}).then(e=>{M("success"),I(100),d(s),c(e,s)}).catch(e=>{d(s),u(e,s),M("danger")})},[]);let z=A||T,R=(0,l.jsxs)("span",{className:i.A.multipleFileUploadStatusItemProgress,children:[(0,l.jsx)("span",{className:i.A.multipleFileUploadStatusItemProgressText,children:f||(null==s?void 0:s.name)||""}),(0,l.jsx)("span",{className:i.A.multipleFileUploadStatusItemProgressSize,children:x||(e=>{let a=["","K","M","G","T"],s=0;for(;e>=1e3;)s+=1,e/=1e3;return s>=a.length?"File size too large":`${Math.round(e)}${a[s]}B`})((null==s?void 0:s.size)||0)})]});return(0,l.jsxs)("li",Object.assign({className:(0,p.A)(i.A.multipleFileUploadStatusItem,a)},P,{children:[(0,l.jsx)("div",{className:i.A.multipleFileUploadStatusItemIcon,children:r||(0,l.jsx)(y,{})}),(0,l.jsxs)("div",{className:i.A.multipleFileUploadStatusItemMain,children:[(0,l.jsxs)("div",{className:"pf-v6-screen-reader","aria-live":"polite",children:[S&&"function"==typeof S&&S(+T.toFixed(2)),S&&"string"==typeof S&&S,!S&&`Progress value is ${A||Math.floor(T)}%.`]}),(0,l.jsx)(m.k,{title:R,value:z,variant:F||N,"aria-label":_,"aria-labelledby":b,id:U,helperText:C})]}),(0,l.jsx)("div",{className:`${i.A.multipleFileUploadStatusItem}-close`,children:(0,l.jsx)(v.$n,{variant:"plain","aria-label":w,onClick:h,icon:(0,l.jsx)(j.Ay,{})})})]}))};A.displayName="MultipleFileUploadStatusItem";var F=s(99205),_=s(16681),b=s(81595),U=s(38927),S=s(80057),w=s(13021),C=s(94279),P=s(16172);let T=(0,x.w)({name:"FileCodeIcon",height:512,width:384,svgPath:"M384 121.941V128H256V0h6.059c6.365 0 12.47 2.529 16.971 7.029l97.941 97.941A24.005 24.005 0 0 1 384 121.941zM248 160c-13.2 0-24-10.8-24-24V0H24C10.745 0 0 10.745 0 24v464c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V160H248zM123.206 400.505a5.4 5.4 0 0 1-7.633.246l-64.866-60.812a5.4 5.4 0 0 1 0-7.879l64.866-60.812a5.4 5.4 0 0 1 7.633.246l19.579 20.885a5.4 5.4 0 0 1-.372 7.747L101.65 336l40.763 35.874a5.4 5.4 0 0 1 .372 7.747l-19.579 20.884zm51.295 50.479l-27.453-7.97a5.402 5.402 0 0 1-3.681-6.692l61.44-211.626a5.402 5.402 0 0 1 6.692-3.681l27.452 7.97a5.4 5.4 0 0 1 3.68 6.692l-61.44 211.626a5.397 5.397 0 0 1-6.69 3.681zm160.792-111.045l-64.866 60.812a5.4 5.4 0 0 1-7.633-.246l-19.58-20.885a5.4 5.4 0 0 1 .372-7.747L284.35 336l-40.763-35.874a5.4 5.4 0 0 1-.372-7.747l19.58-20.885a5.4 5.4 0 0 1 7.633-.246l64.866 60.812a5.4 5.4 0 0 1-.001 7.879z",yOffset:0,xOffset:0,svgClassName:void 0});var I=s(84608);let N=e=>{let{uploads:a,handleUpload:s,handleRemoveUpload:n,extractSuccessMessage:i,extractErrorMessage:p}=e,[d,c]=t.useState(!1),[u,h]=t.useState("inProgress"),[g,m]=t.useState([]);!d&&a.size>0&&c(!0),t.useEffect(()=>{let e=Array.from(a.values());e.some(e=>"inProgress"===e.status)?h("inProgress"):e.every(e=>"complete"===e.status)?h("success"):h("danger")},[a]);let v=Array.from(a.values()).filter(e=>e.response).length;return(0,l.jsxs)(r.w,{onFileDrop:(e,a)=>{s(a)},dropzoneProps:{accept:{"application/xml":[".json",".bz2"]},onDropRejected:e=>{m(e)},useFsAccessApi:!1},children:[(0,l.jsx)(o.x,{titleIcon:(0,l.jsx)(I.Ay,{}),titleText:"Drag and drop files here",titleTextSeparator:"or",infoText:"Accepted file types: .json, .bz2"}),d&&(0,l.jsx)(f,{statusToggleText:"".concat(v," of ").concat(a.size," files uploaded"),statusToggleIcon:u,children:Array.from(a.entries()).map((e,a)=>{let[s,t]=e;return(0,l.jsx)(A,{customFileHandler:()=>{},fileIcon:(0,l.jsx)(T,{}),file:s,onClearClick:()=>(e=>{for(let a of e)n(a)})([s]),progressValue:t.progress,progressVariant:t.error?"danger":t.response?"success":void 0,progressHelperText:t.error?(0,l.jsx)(F.E,{isLiveRegion:!0,children:(0,l.jsx)(_.j,{variant:"error",children:p(t.error)})}):100!==t.progress||t.response?t.response?(0,l.jsx)(F.E,{isLiveRegion:!0,children:(0,l.jsx)(_.j,{variant:"default",children:i(t.response)})}):void 0:(0,l.jsx)(F.E,{isLiveRegion:!0,children:(0,l.jsxs)(_.j,{variant:"warning",children:[(0,l.jsx)(b.y,{isInline:!0}),"File uploaded. Waiting for the server to process it."]})})},"".concat(s.name,"-").concat(a))})}),(0,l.jsxs)(U.a,{isOpen:g.length>0,"aria-label":"unsupported file upload attempted",onClose:()=>m([]),variant:"small",children:[(0,l.jsx)(S.r,{title:"Unsupported files",titleIconVariant:"warning"}),(0,l.jsx)(w.c,{children:(0,l.jsx)(C.B8,{children:g.map(e=>(0,l.jsx)(P.c,{children:e.file.name},e.file.name))})})]})]})}},93531:function(e,a,s){s.d(a,{v:()=>c});var l=s(32909),t=s(42642),r=s(63696),o=s(98259),n=s(46165);let i="cancelled",p=()=>({progress:0,status:"queued",error:void 0,response:void 0,wasCancelled:!1,cancelFn:void 0}),d=(e,a)=>{switch(a.type){case"queueUpload":return(0,t._)((0,l._)({},e),{uploads:new Map(e.uploads).set(a.payload.file,(0,t._)((0,l._)({},e.uploads.get(a.payload.file)||p()),{status:"queued",cancelFn:a.payload.cancelFn}))});case"updateUploadProgress":return(0,t._)((0,l._)({},e),{uploads:new Map(e.uploads).set(a.payload.file,(0,t._)((0,l._)({},e.uploads.get(a.payload.file)||p()),{progress:a.payload.progress||0,status:"inProgress"}))});case"finishUploadSuccessfully":return(0,t._)((0,l._)({},e),{uploads:new Map(e.uploads).set(a.payload.file,(0,t._)((0,l._)({},e.uploads.get(a.payload.file)||p()),{status:"complete",response:a.payload.response}))});case"finishUploadWithError":var s;return(0,t._)((0,l._)({},e),{uploads:new Map(e.uploads).set(a.payload.file,(0,t._)((0,l._)({},e.uploads.get(a.payload.file)||p()),{status:"complete",error:a.payload.error,wasCancelled:(null==(s=a.payload.error)?void 0:s.message)===i}))});case"removeUpload":{let s=new Map(e.uploads);return s.delete(a.payload.file),(0,t._)((0,l._)({},e),{uploads:s})}default:throw Error()}},c=e=>{let{parallel:a,uploadFn:s,onSuccess:l,onError:t}=e,[p,c]=r.useReducer(d,{uploads:new Map});return{uploads:p.uploads,handleUpload:e=>{let r=[];for(let a=0;a<e.length;a++){let s=e[a],p=new FormData;p.set(o.fs,s);let d=n.A.CancelToken.source(),u={headers:{"X-Requested-With":"XMLHttpRequest"},onUploadProgress:e=>{var a;let l=null!=(a=e.total)?a:1;c({type:"updateUploadProgress",payload:{file:s,progress:Math.round(e.loaded/l*100)}})},cancelToken:d.token};c({type:"queueUpload",payload:{file:s,cancelFn:d}});let h={formData:p,config:u,thenFn:e=>{c({type:"finishUploadSuccessfully",payload:{file:s,response:e}}),l&&l(e,s)},catchFn:e=>{c({type:"finishUploadWithError",payload:{file:s,error:e}}),e.message!==i&&t&&t(e,s)}};r.push(h)}if(a)for(let e of r)s(e.formData,e.config).then(e.thenFn).catch(e.catchFn);else r.reduce(async(e,a)=>(await e,s(a.formData,a.config).then(a.thenFn).catch(a.catchFn)),Promise.resolve())},handleCancelUpload:e=>{var a,s;null==(s=p.uploads.get(e))||null==(a=s.cancelFn)||a.cancel(i)},handleRemoveUpload:e=>{c({type:"removeUpload",payload:{file:e}})}}}}}]);