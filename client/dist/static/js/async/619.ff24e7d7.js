"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([["619"],{47849:function(e,l,i){i.d(l,{F:()=>m,W:()=>p});var n=i(79192),t=i(53195),s=i(24246),r=i(27378),a=i(74502),o=i(32947),d=i(14629),c=i(49988),u=i(43959);let p=r.createContext({}),m=e=>{var l;let{children:i}=e,[m,x]=r.useState(""),[h,b]=r.useState("");r.useEffect(()=>{let e=setTimeout(()=>{b(m)},400);return()=>clearTimeout(e)},[m]);let{labels:j}=(0,u.i5)(h),_=(0,c.vZ)({tableName:"sbom",persistenceKeyPrefix:a.yq.sboms,persistTo:"urlParams",columnNames:{name:"Name",version:"Version",supplier:"Supplier",labels:"Labels",published:"Created on",packages:"Dependencies",vulnerabilities:"Vulnerabilities"},isPaginationEnabled:!0,isSortEnabled:!0,sortableColumns:["name","published"],isFilterEnabled:!0,filterCategories:[{categoryKey:a.L4,title:"Filter text",placeholderText:"Search",type:d.vA.search},{categoryKey:"published",title:"Created on",type:d.vA.dateRange},{categoryKey:"labels",title:"Label",type:d.vA.autocompleteLabel,placeholderText:"Filter results by label",selectOptions:j.map(e=>{let l=(0,o.W)({key:e.key,value:e.value});return{value:l,label:l}}),onInputValueChange:x}],isExpansionEnabled:!1}),{result:{data:y,total:v},isFetching:f,fetchError:C}=(0,u.Fz)((0,c.QO)((0,t._)((0,n._)({},_),{hubSortFieldKeys:{name:"name",published:"published"}})),(null!=(l=_.filterState.filterValues.labels)?l:[]).map(e=>(0,o.nE)(e))),g=(0,c.KC)((0,t._)((0,n._)({},_),{idProperty:"id",currentPageItems:y,totalItemCount:v,isLoading:f}));return(0,s.jsx)(p.Provider,{value:{totalItemCount:v,isFetching:f,fetchError:C,tableControls:g},children:i})}},68801:function(e,l,i){i.d(l,{H:()=>V});var n=i(79192),t=i(53195),s=i(24246),r=i(27378),a=i(6501),o=i(79551),d=i(32489),c=i(90519),u=i(78700),p=i(4835),m=i(14350),x=i(11165),h=i(89330),b=i(31423),j=i(94154),_=i(88935),y=i(32947),v=i(6348),f=i(73827),C=i(15726),g=i(3804),T=i(31336),K=i(74502),k=i(73227),S=i(43959),E=i(27031),w=i(63706),P=i(66043),L=i(11797),F=i(37818),B=i(42573),D=i(49304),O=i(82413);let W=e=>{let{sbomId:l}=e,{data:i,isFetching:n,fetchError:t}=(0,O.Ap)(l);return(0,s.jsx)(F.u,{isFetching:n,fetchError:t,isFetchingState:(0,s.jsx)(L.O,{screenreaderText:"Loading contents"}),fetchErrorState:e=>(0,s.jsx)(B.C,{error:e}),children:(0,s.jsx)(D.u,{severities:i.summary.vulnerabilityStatus.affected.severities})})};var I=i(47849);let V=()=>{let{pushNotification:e}=r.useContext(C.c),{isFetching:l,fetchError:i,totalItemCount:L,tableControls:F}=r.useContext(I.W),[B,D]=r.useState(null),O=null!==B,{numRenderedColumns:V,currentPageItems:A,propHelpers:{paginationProps:z,tableProps:N,getThProps:H,getTrProps:R,getTdProps:U},expansionDerivedState:{isCellExpanded:q},filterState:{filterValues:G,setFilterValues:M}}=F,{downloadSBOM:Q,downloadSBOMLicenses:X}=(0,k.i)(),Z=()=>{D(null)},[J,Y]=r.useState(null),{mutate:$,isPending:ee}=(0,S.s5)(l=>{Y(null),e({title:(0,K.zp)(l),variant:"success"})},l=>{e({title:(0,K.BX)(l),variant:"danger"})});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(p.i,(0,t._)((0,n._)({},N),{"aria-label":"sbom-table",children:[(0,s.jsx)(m.h,{children:(0,s.jsx)(x.Tr,{children:(0,s.jsxs)(T.qK,(0,t._)((0,n._)({},F),{children:[(0,s.jsx)(h.Th,(0,n._)({},H({columnKey:"name"}))),(0,s.jsx)(h.Th,(0,n._)({},H({columnKey:"version"}))),(0,s.jsx)(h.Th,(0,n._)({},H({columnKey:"supplier"}))),(0,s.jsx)(h.Th,(0,n._)({},H({columnKey:"labels"}))),(0,s.jsx)(h.Th,(0,n._)({},H({columnKey:"published"}))),(0,s.jsx)(h.Th,(0,n._)({},H({columnKey:"packages"}))),(0,s.jsx)(h.Th,(0,n._)({},H({columnKey:"vulnerabilities"})))]}))})}),(0,s.jsx)(T.hp,{isLoading:l,isError:!!i,isNoData:0===L,numRenderedColumns:V,children:A.map((e,l)=>(0,s.jsx)(b.p,{isExpanded:q(e),children:(0,s.jsx)(x.Tr,(0,t._)((0,n._)({},R({item:e})),{children:(0,s.jsxs)(T.Cx,(0,t._)((0,n._)({},F),{item:e,rowIndex:l,children:[(0,s.jsx)(j.Td,(0,t._)((0,n._)({width:20,modifier:"breakWord"},U({columnKey:"name",isCompoundExpandToggle:!0,item:e,rowIndex:l})),{children:(0,s.jsx)(a.OL,{to:(0,a.Gn)(E.nB.sbomDetails,{sbomId:e.id}),children:e.name})})),(0,s.jsx)(j.Td,(0,t._)((0,n._)({width:10,modifier:"truncate"},U({columnKey:"version"})),{children:e.described_by.map(e=>e.version).filter(e=>e).join(", ")})),(0,s.jsx)(j.Td,(0,t._)((0,n._)({width:10,modifier:"truncate"},U({columnKey:"supplier"})),{children:e.suppliers.join(", ")})),(0,s.jsx)(j.Td,(0,t._)((0,n._)({width:20,modifier:"truncate"},U({columnKey:"labels"})),{children:(0,s.jsx)(f.C,{value:e.labels,onClick:e=>{let{key:l,value:i}=e,s=(0,y.W)({key:l,value:i}),r=G.labels;if(!(null==r?void 0:r.includes(s))){let e=r?[...r,s]:[s];M((0,t._)((0,n._)({},G),{labels:e}))}}})})),(0,s.jsx)(j.Td,(0,t._)((0,n._)({width:10,modifier:"truncate"},U({columnKey:"published"})),{children:(0,w.p6)(e.published)})),(0,s.jsx)(j.Td,(0,t._)((0,n._)({width:10},U({columnKey:"packages"})),{children:e.number_of_packages})),(0,s.jsx)(j.Td,(0,t._)((0,n._)({width:20},U({columnKey:"vulnerabilities"})),{children:(0,s.jsx)(W,{sbomId:e.id})})),(0,s.jsx)(j.Td,{isActionCell:!0,children:(0,s.jsx)(_.k,{items:[{title:"Edit labels",onClick:()=>{D(e)}},{isSeparator:!0},{title:"Download SBOM",onClick:()=>{Q(e.id,"".concat(e.name,".json"))}},{title:"Download License Report",onClick:()=>{X(e.id)}},{isSeparator:!0},{title:"Delete",onClick:()=>{Y(e)}}]})})]}))}))},e.id))})]})),(0,s.jsx)(g.p,{idPrefix:"sbom-table",isTop:!1,paginationProps:z}),(0,s.jsxs)(o.u,{isOpen:O,variant:"medium",onClose:Z,children:[(0,s.jsx)(d.x,{title:"Edit labels"}),(0,s.jsx)(c.f,{children:B&&(0,s.jsx)(P._,{sbom:B,onClose:Z})})]}),(0,s.jsx)(v.Q,(0,t._)((0,n._)({},(0,K.KU)(J)),{inProgress:ee,titleIconVariant:"warning",isOpen:!!J,confirmBtnVariant:u.Wu.danger,confirmBtnLabel:"Delete",cancelBtnLabel:"Cancel",onCancel:()=>Y(null),onClose:()=>Y(null),onConfirm:()=>{J&&$(J.id)}}))]})}},83870:function(e,l,i){i.d(l,{c:()=>b});var n=i(79192),t=i(53195),s=i(24246),r=i(27378),a=i(6501),o=i(70715),d=i(40982),c=i(89226),u=i(78700),p=i(14629),m=i(3804),x=i(27031),h=i(47849);let b=e=>{let{showFilters:l,showActions:i}=e,b=(0,a.s0)(),{tableControls:j}=r.useContext(h.W),{propHelpers:{toolbarProps:_,filterToolbarProps:y,paginationToolbarItemProps:v,paginationProps:f}}=j;return(0,s.jsx)(o.o,(0,t._)((0,n._)({},_),{"aria-label":"sbom-toolbar",children:(0,s.jsxs)(d.c,{children:[l&&(0,s.jsx)(p.Ki,(0,n._)({},y)),i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.E,{children:(0,s.jsx)(u.zx,{variant:"primary",onClick:()=>b(x.nB.sbomUpload),children:"Upload SBOM"})}),(0,s.jsx)(c.E,{children:(0,s.jsx)(u.zx,{variant:"secondary",onClick:()=>b(x.nB.sbomScan),children:"Generate vulnerability report"})})]}),(0,s.jsx)(c.E,(0,t._)((0,n._)({},v),{children:(0,s.jsx)(m.p,{idPrefix:"sbom-table",isTop:!0,paginationProps:f})}))]})}))}}}]);