"use strict";(self.webpackChunk_trustify_ui_client=self.webpackChunk_trustify_ui_client||[]).push([["573"],{54006:function(e,r,t){t.r(r),t.d(r,{default:()=>y});var a=t(62540),l=t(74343),n=t(68430),i=t(98261),s=t(75530),d=t(42957),u=t(58625),o=t(99134),c=t(52362);let y=()=>{let{uploads:e,handleUpload:r,handleRemoveUpload:t}=(0,o.Yu)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.d8,{type:"breadcrumb",children:(0,a.jsxs)(i.Q,{children:[(0,a.jsx)(s.J,{children:(0,a.jsx)(l.N_,{to:c.Jh.advisories,children:"Advisories"})}),(0,a.jsx)(s.J,{isActive:!0,children:"Upload Advisory"})]})}),(0,a.jsx)(n.d8,{children:(0,a.jsxs)(d.U,{children:[(0,a.jsx)(d.U,{component:"h1",children:"Upload Advisory"}),(0,a.jsx)(d.U,{component:"p",children:"Upload a CSAF, CVE, or OSV Advisory."})]})}),(0,a.jsx)(n.d8,{children:(0,a.jsx)(u.h,{uploads:e,handleUpload:r,handleRemoveUpload:t,extractSuccessMessage:e=>"".concat(e.data.document_id," uploaded"),extractErrorMessage:e=>{var r;return(null==(r=e.response)?void 0:r.data)?e.message:"Error while uploading file"}})})]})}},99134:function(e,r,t){t.d(r,{VH:()=>q,Yu:()=>_,eq:()=>j,ni:()=>f,uJ:()=>m,vy:()=>x});var a=t(32909),l=t(42642),n=t(72610),i=t(77184),s=t(59722),d=t(62603),u=t(90130),o=t(96002),c=t(86141),y=t(81895),h=t(73470),v=t(93531);let p="advisories",j=e=>{let{data:r,isLoading:t,error:a,refetch:l}=(0,i.I)({queryKey:[p,"labels",e],queryFn:()=>(0,c.J)({client:o.S,query:{limit:10,filter_text:e}}),placeholderData:s.rX});return{labels:(null==r?void 0:r.data)||[],isFetching:t,fetchError:a,refetch:l}},q=function(){var e,r,t;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],y=(0,h.kd)(s),{q:v}=y,j=(0,n._)(y,["q"]),q=(0,h.Er)(d),{data:x,isLoading:f,error:_,refetch:m}=(0,i.I)({queryKey:[p,s,q],queryFn:()=>(0,c.YM)({client:o.S,query:(0,l._)((0,a._)({},j),{q:[v,q].filter(e=>e).join("&")})}),enabled:!u});return{result:{data:(null==x||null==(e=x.data)?void 0:e.items)||[],total:null!=(t=null==x||null==(r=x.data)?void 0:r.total)?t:0,params:s},isFetching:f,fetchError:_||null,refetch:m}},x=e=>{let{data:r,isLoading:t,error:a}=(0,i.I)({queryKey:[p,e],queryFn:()=>(0,c.ai)({client:o.S,path:{key:e}}),enabled:!!e});return{advisory:null==r?void 0:r.data,isFetching:t,fetchError:a}},f=(e,r)=>{let t=(0,d.jE)();return(0,u.n)({mutationFn:async e=>(await (0,c.vl)({client:o.S,path:{key:e}})).data,onSuccess:async(r,a)=>{e(r,a),await t.invalidateQueries({queryKey:[p]})},onError:async e=>{r(e),await t.invalidateQueries({queryKey:[p]})}})},_=()=>{let e=(0,d.jE)();return(0,v.v)({parallel:!0,uploadFn:(e,r)=>(0,y.hP)(e,r),onSuccess:async()=>{await e.invalidateQueries({queryKey:[p]})}})},m=(e,r)=>{let t=(0,d.jE)();return(0,u.n)({mutationFn:e=>(0,c._e)({client:o.S,path:{id:e.id},body:e.labels}),onSuccess:async(r,a)=>{e(),await t.invalidateQueries({queryKey:[p]})},onError:r})}}}]);